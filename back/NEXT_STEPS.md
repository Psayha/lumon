# üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ DNS

## 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ DNS –∑–∞–ø–∏—Å–µ–π

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ DNS –≤ –ø–∞–Ω–µ–ª–∏ reg.ru, –ø—Ä–æ–≤–µ—Ä—å —á—Ç–æ –∑–∞–ø–∏—Å–∏ —Ä–∞–∑—Ä–µ—à–∞—é—Ç—Å—è:

```bash
dig n8n.psayha.ru +short
dig sb.psayha.ru +short
```

–û–±–∞ –¥–æ–ª–∂–Ω—ã –≤–µ—Ä–Ω—É—Ç—å: `91.229.10.47`

## 2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ SSL

–ò—Å–ø–æ–ª—å–∑—É–π –≥–æ—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç:

```bash
cd /var/www/back
chmod +x check-dns-and-ssl.sh
./check-dns-and-ssl.sh
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –ü—Ä–æ–≤–µ—Ä–∏—Ç DNS –∑–∞–ø–∏—Å–∏
- –ü–æ–ª—É—á–∏—Ç SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã —á–µ—Ä–µ–∑ Certbot
- –û–±–Ω–æ–≤–∏—Ç –∫–æ–Ω—Ñ–∏–≥–∏ nginx

## 3. –†—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ SSL (–µ—Å–ª–∏ —Å–∫—Ä–∏–ø—Ç –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª)

```bash
# –î–ª—è n8n
sudo certbot --nginx -d n8n.psayha.ru

# –î–ª—è Supabase
sudo certbot --nginx -d sb.psayha.ru
```

## 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–æ–≤

–ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤, –ø—Ä–æ–≤–µ—Ä—å:

```bash
# –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Å–µ—Ä–≤–∏—Å—ã –¥–æ—Å—Ç—É–ø–Ω—ã
curl -I https://n8n.psayha.ru
curl -I https://sb.psayha.ru

# –ò–ª–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
# - https://n8n.psayha.ru
# - https://sb.psayha.ru
```

## 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ nginx –∫–æ–Ω—Ñ–∏–≥–æ–≤

–ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è SSL, certbot –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–∏—Ç –∫–æ–Ω—Ñ–∏–≥–∏.
–ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –≤—Å–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ:

```bash
sudo nginx -t
sudo systemctl reload nginx
```

## 6. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

–£–±–µ–¥–∏—Å—å —á—Ç–æ –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç:

```bash
cd /var/www/back
docker compose ps
docker compose logs
```

## 7. –ò–º–ø–æ—Ä—Ç n8n workflows

–ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ n8n –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ –ø–æ–¥–¥–æ–º–µ–Ω:

1. –û—Ç–∫—Ä–æ–π https://n8n.psayha.ru
2. –í–æ–π–¥–∏ –≤ —Å–∏—Å—Ç–µ–º—É (—É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ `.env`)
3. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π workflows –∏–∑ `/var/www/back/n8n/workflows/`
4. –ê–∫—Ç–∏–≤–∏—Ä—É–π –≤—Å–µ workflows

## 8. –ü—Ä–æ–≤–µ—Ä–∫–∞ API endpoints

–ü–æ—Å–ª–µ –∏–º–ø–æ—Ä—Ç–∞ workflows, –ø—Ä–æ–≤–µ—Ä—å —á—Ç–æ endpoints –æ—Ç–≤–µ—á–∞—é—Ç:

```bash
curl -X POST https://n8n.psayha.ru/webhook/save-message \
  -H "Content-Type: application/json" \
  -d '{"test": "data"}'
```

## 9. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

–ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ n8n –¥–æ—Å—Ç—É–ø–µ–Ω, —Å–ª–µ–¥—É—é—â–∏–π –¥–µ–ø–ª–æ–π —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
- `VITE_API_URL=https://n8n.psayha.ru` (—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –≤ GitHub Actions)

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

- [ ] DNS –∑–∞–ø–∏—Å–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∏ —Ä–µ–∑–æ–ª–≤—è—Ç—Å—è
- [ ] SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –ø–æ–ª—É—á–µ–Ω—ã
- [ ] Nginx –∫–æ–Ω—Ñ–∏–≥–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã
- [ ] –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] n8n –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ https://n8n.psayha.ru
- [ ] Supabase –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ https://sb.psayha.ru
- [ ] Workflows –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω—ã
- [ ] API endpoints –æ—Ç–≤–µ—á–∞—é—Ç

