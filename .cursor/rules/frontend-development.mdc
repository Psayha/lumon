---
globs: front/**/*.tsx,packages/**/*.tsx
description: –ü—Ä–∞–≤–∏–ª–∞ frontend —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –¥–ª—è Lumon
---

# ‚öõÔ∏è Frontend Development Rules

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### ‚úÖ –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –ö–û–ú–ü–û–ù–ï–ù–¢–û–í
- –û–¥–∏–Ω —Ñ–∞–π–ª = –æ–¥–∏–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å —Ö—É–∫–∞–º–∏
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ props –∏ state
- –ü—Ä–æ—Å—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –±–µ–∑ –∏–∑–±—ã—Ç–æ—á–Ω–æ–π –ª–æ–≥–∏–∫–∏
- –¢–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ useEffect

### ‚úÖ –°–¢–†–£–ö–¢–£–†–ê –§–ê–ô–õ–û–í
```
front/
‚îú‚îÄ‚îÄ components/           # –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ Button.tsx
‚îÇ   ‚îú‚îÄ‚îÄ Card.tsx
‚îÇ   ‚îî‚îÄ‚îÄ Modal.tsx
‚îú‚îÄ‚îÄ pages/               # –°—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ MenuPage.tsx
‚îÇ   ‚îî‚îÄ‚îÄ VoiceAssistantPage.tsx
‚îú‚îÄ‚îÄ hooks/               # –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Ö—É–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ useAuth.ts
‚îÇ   ‚îî‚îÄ‚îÄ useLocalStorage.ts
‚îî‚îÄ‚îÄ utils/               # –£—Ç–∏–ª–∏—Ç—ã
    ‚îú‚îÄ‚îÄ helpers.ts
    ‚îî‚îÄ‚îÄ constants.ts
```

### ‚úÖ –ü–ê–¢–¢–ï–†–ù–´ –†–ê–ó–†–ê–ë–û–¢–ö–ò
- Container/Presentational pattern
- Custom hooks –¥–ª—è –ª–æ–≥–∏–∫–∏
- Compound components –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö UI
- Render props –¥–ª—è –≥–∏–±–∫–æ—Å—Ç–∏

## üìù –ü–†–ò–ú–ï–†–´ –ü–†–ê–í–ò–õ–¨–ù–û–ô –†–ï–ê–õ–ò–ó–ê–¶–ò–ò

### ‚úÖ –ü—Ä–æ—Å—Ç–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
```tsx
import React, { useState } from 'react';
import { Plus, Minus } from 'lucide-react';

interface CounterProps {
  initialValue?: number;
  onChange?: (value: number) => void;
}

const Counter: React.FC<CounterProps> = ({ 
  initialValue = 0, 
  onChange 
}) => {
  const [count, setCount] = useState(initialValue);

  const handleIncrement = () => {
    const newCount = count + 1;
    setCount(newCount);
    onChange?.(newCount);
  };

  const handleDecrement = () => {
    const newCount = count - 1;
    setCount(newCount);
    onChange?.(newCount);
  };

  return (
    <div className="flex items-center space-x-3">
      <button
        onClick={handleDecrement}
        className="p-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors"
        aria-label="–£–º–µ–Ω—å—à–∏—Ç—å"
      >
        <Minus className="w-4 h-4" />
      </button>
      
      <span className="text-lg font-semibold min-w-[2rem] text-center">
        {count}
      </span>
      
      <button
        onClick={handleIncrement}
        className="p-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors"
        aria-label="–£–≤–µ–ª–∏—á–∏—Ç—å"
      >
        <Plus className="w-4 h-4" />
      </button>
    </div>
  );
};

export default Counter;
```

### ‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Å —Ö—É–∫–∞–º–∏
```tsx
import React, { useState, useEffect } from 'react';

interface UserProfileProps {
  userId: string;
}

const UserProfile: React.FC<UserProfileProps> = ({ userId }) => {
  const [user, setUser] = useState(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);

  useEffect(() => {
    const fetchUser = async () => {
      try {
        setLoading(true);
        const response = await fetch(`/api/users/${userId}`);
        const userData = await response.json();
        setUser(userData);
      } catch (err) {
        setError(err.message);
      } finally {
        setLoading(false);
      }
    };

    fetchUser();
  }, [userId]);

  if (loading) {
    return (
      <div className="flex items-center justify-center p-8">
        <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div>
      </div>
    );
  }

  if (error) {
    return (
      <div className="p-4 bg-red-50 border border-red-200 rounded-lg">
        <p className="text-red-600">–û—à–∏–±–∫–∞: {error}</p>
      </div>
    );
  }

  return (
    <div className="p-6 bg-white rounded-lg shadow-md">
      <h2 className="text-xl font-bold mb-4">{user.name}</h2>
      <p className="text-gray-600">{user.email}</p>
    </div>
  );
};

export default UserProfile;
```

### ‚úÖ –ö–∞—Å—Ç–æ–º–Ω—ã–π —Ö—É–∫
```tsx
import { useState, useEffect } from 'react';

interface UseLocalStorageReturn<T> {
  value: T;
  setValue: (value: T) => void;
  removeValue: () => void;
}

export const useLocalStorage = <T>(
  key: string, 
  initialValue: T
): UseLocalStorageReturn<T> => {
  const [value, setValue] = useState<T>(() => {
    try {
      const item = window.localStorage.getItem(key);
      return item ? JSON.parse(item) : initialValue;
    } catch (error) {
      console.error(`Error reading localStorage key "${key}":`, error);
      return initialValue;
    }
  });

  const setStoredValue = (value: T) => {
    try {
      setValue(value);
      window.localStorage.setItem(key, JSON.stringify(value));
    } catch (error) {
      console.error(`Error setting localStorage key "${key}":`, error);
    }
  };

  const removeValue = () => {
    try {
      window.localStorage.removeItem(key);
      setValue(initialValue);
    } catch (error) {
      console.error(`Error removing localStorage key "${key}":`, error);
    }
  };

  return { value, setValue: setStoredValue, removeValue };
};
```

### ‚úÖ Compound Component
```tsx
import React, { createContext, useContext } from 'react';

interface AccordionContextType {
  isOpen: boolean;
  toggle: () => void;
}

const AccordionContext = createContext<AccordionContextType | null>(null);

const useAccordion = () => {
  const context = useContext(AccordionContext);
  if (!context) {
    throw new Error('useAccordion must be used within Accordion');
  }
  return context;
};

interface AccordionProps {
  children: React.ReactNode;
  defaultOpen?: boolean;
}

const Accordion: React.FC<AccordionProps> = ({ 
  children, 
  defaultOpen = false 
}) => {
  const [isOpen, setIsOpen] = useState(defaultOpen);

  const toggle = () => setIsOpen(!isOpen);

  return (
    <AccordionContext.Provider value={{ isOpen, toggle }}>
      <div className="border border-gray-200 rounded-lg">
        {children}
      </div>
    </AccordionContext.Provider>
  );
};

const AccordionHeader: React.FC<{ children: React.ReactNode }> = ({ 
  children 
}) => {
  const { toggle } = useAccordion();

  return (
    <button
      onClick={toggle}
      className="w-full p-4 text-left hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500"
    >
      {children}
    </button>
  );
};

const AccordionContent: React.FC<{ children: React.ReactNode }> = ({ 
  children 
}) => {
  const { isOpen } = useAccordion();

  return (
    <div className={`overflow-hidden transition-all duration-200 ${
      isOpen ? 'max-h-96 opacity-100' : 'max-h-0 opacity-0'
    }`}>
      <div className="p-4 border-t border-gray-200">
        {children}
      </div>
    </div>
  );
};

// –≠–∫—Å–ø–æ—Ä—Ç —Å–æ—Å—Ç–∞–≤–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
export { Accordion, AccordionHeader, AccordionContent };
```

## üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û

### ‚ùå –ù–ï –î–ï–õ–ê–ô–¢–ï
```tsx
// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û - –∫–ª–∞—Å—Å–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
class MyComponent extends React.Component {
  render() {
    return <div>Hello</div>;
  }
}

// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û - —Å–ª–æ–∂–Ω—ã–µ —Ç–∏–ø—ã
interface OverComplexProps<T extends Record<string, any>, K extends keyof T> {
  data: T;
  key: K;
  transformer: (value: T[K]) => Promise<ComplexType<T[K]>>;
}

// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û - –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ useEffect
useEffect(() => {
  // –°–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ö—É–∫–µ
}, [dependency1, dependency2, dependency3, dependency4]);
```

### ‚úÖ –î–ï–õ–ê–ô–¢–ï –¢–ê–ö
```tsx
// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
const MyComponent: React.FC = () => {
  return <div>Hello</div>;
};

// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - –ø—Ä–æ—Å—Ç—ã–µ —Ç–∏–ø—ã
interface SimpleProps {
  title: string;
  onClick: () => void;
}

// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - –ø—Ä–æ—Å—Ç—ã–µ useEffect
useEffect(() => {
  // –ü—Ä–æ—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞
}, [dependency]);
```

## üéØ –õ–£–ß–®–ò–ï –ü–†–ê–ö–¢–ò–ö–ò

### 1. **–ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤**
```tsx
// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - PascalCase
const UserProfile = () => {};
const NavigationMenu = () => {};

// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û - camelCase
const userProfile = () => {};
```

### 2. **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ props**
```tsx
// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - –¥–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏–∑–∞—Ü–∏—è
const Button = ({ children, onClick, variant = 'primary' }: ButtonProps) => {
  // ...
};

// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û - props object
const Button = (props: ButtonProps) => {
  return <button onClick={props.onClick}>{props.children}</button>;
};
```

### 3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π**
```tsx
// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
const handleClick = () => {
  // –ª–æ–≥–∏–∫–∞
};

<button onClick={handleClick}>Click me</button>

// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û - inline —Ñ—É–Ω–∫—Ü–∏–∏
<button onClick={() => { /* —Å–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ */ }}>Click me</button>
```

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### –ü—Ä–æ—Å—Ç—ã–µ —Ç–µ—Å—Ç—ã
```tsx
import { render, screen, fireEvent } from '@testing-library/react';
import Counter from './Counter';

test('increments counter on button click', () => {
  render(<Counter />);
  
  const button = screen.getByLabelText('–£–≤–µ–ª–∏—á–∏—Ç—å');
  fireEvent.click(button);
  
  expect(screen.getByText('1')).toBeInTheDocument();
});
```

---

**–ü–æ–º–Ω–∏**: –ü—Ä–æ—Å—Ç–æ—Ç–∞ –∏ —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –∫–æ–¥–∞ –≤–∞–∂–Ω–µ–µ –ø—Ä–µ–∂–¥–µ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏.