{"version":3,"file":"index-fb3fa12f.js","sources":["../../adminpage/node_modules/react-dom/client.js","../../adminpage/config/api.ts","../../adminpage/components/AdminLogin.tsx","../../adminpage/components/Toast.tsx","../../adminpage/tabs/CompaniesTab.tsx","../../adminpage/tabs/LegalDocsTab.tsx","../../adminpage/tabs/AIDocumentsTab.tsx","../../adminpage/tabs/BackupsTab.tsx","../../adminpage/tabs/HealthChecksTab.tsx","../../adminpage/tabs/LogsTab.tsx","../../adminpage/tabs/UsersTab.tsx","../../adminpage/tabs/AnalyticsTab.tsx","../../adminpage/tabs/ABTestingTab.tsx","../../adminpage/AdminPage.tsx","../../adminpage/main.tsx"],"sourcesContent":["'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","// API Configuration for Admin Panel\n// Backend: NestJS API (migrated from n8n on Nov 16, 2025)\n// Production: https://n8n.psayha.ru (NestJS API on port 3000)\n// Development: http://localhost:3000\n\nexport const ADMIN_API_CONFIG = {\n  baseUrl: import.meta.env.VITE_API_URL || (import.meta.env.PROD ? 'https://n8n.psayha.ru' : 'http://localhost:3000'),\n  \n  endpoints: {\n    // Admin Auth\n    adminLogin: '/webhook/admin/login',\n    adminValidate: '/webhook/admin/validate',\n\n    // Admin Companies\n    adminCompaniesList: '/webhook/admin/companies-list',\n\n    // Admin Legal Docs (Not yet migrated)\n    adminLegalDocsList: '/webhook/admin/legal-docs-list',\n    adminLegalDocsUpdate: '/webhook/admin/legal-docs-update',\n\n    // Admin AI Docs (Not yet migrated)\n    adminAiDocsList: '/webhook/admin/ai-docs-list',\n    adminAiDocsDelete: '/webhook/admin/ai-docs-delete',\n\n    // Admin Backups (Not yet migrated)\n    backupList: '/webhook/admin/backup-list',\n    backupCreate: '/webhook/admin/backup-create',\n    backupRestore: '/webhook/admin/backup-restore',\n    backupDelete: '/webhook/admin/backup-delete',\n\n    // Admin Health Checks (Not yet migrated)\n    healthCheckList: '/webhook/admin/health-check-list',\n    healthCheck: '/webhook/admin/health-check',\n\n    // Admin Logs\n    adminLogsList: '/webhook/admin/logs-list',\n\n    // Admin Users\n    adminUsersList: '/webhook/admin/users-list',\n    adminUserLimitsList: '/webhook/admin/user-limits-list',\n    adminUserLimitsUpdate: '/webhook/admin/user-limits-update',\n    adminUserHistoryClear: '/webhook/admin/user-history-clear',\n    adminUserDelete: '/webhook/admin/user-delete',\n\n    // Admin Analytics\n    adminStatsPlatform: '/webhook/admin/stats-platform',\n\n    // Admin AB Testing\n    adminAbExperimentsList: '/webhook/admin/ab-experiments-list',\n    adminAbExperimentCreate: '/webhook/admin/ab-experiment-create',\n    adminAbExperimentUpdate: '/webhook/admin/ab-experiment-update',\n  },\n  \n  timeout: 30000,\n};\n\n// Helper function to build full URL\nexport const getAdminApiUrl = (endpoint: string): string => {\n  return `${ADMIN_API_CONFIG.baseUrl}${endpoint}`;\n};\n\n// Default headers for Admin API requests\nexport const getAdminHeaders = (): Record<string, string> => {\n  const headers: Record<string, string> = {\n    'Content-Type': 'application/json',\n    'Accept': 'application/json',\n  };\n\n  const token = localStorage.getItem('admin_token');\n  if (token) {\n    headers['Authorization'] = `Bearer ${token}`;\n  }\n\n  return headers;\n};\n\n// Helper function for making admin API requests\nexport const adminApiRequest = async <T = any>(\n  endpoint: string,\n  options: RequestInit = {}\n): Promise<{ success: boolean; data?: T; message?: string; pagination?: any }> => {\n  const url = endpoint.startsWith('http') ? endpoint : getAdminApiUrl(endpoint);\n  const headers = getAdminHeaders();\n\n  try {\n    const response = await fetch(url, {\n      ...options,\n      headers: {\n        ...headers,\n        ...(options.headers || {}),\n      },\n    });\n\n    const responseText = await response.text();\n    const contentType = response.headers.get('content-type');\n    let data: any;\n\n    if (!responseText || responseText.trim() === '') {\n      if (!response.ok) {\n        return {\n          success: false,\n          message: `Ошибка сервера: ${response.status} ${response.statusText || 'Internal Server Error'}`,\n        };\n      }\n      return {\n        success: true,\n        data: undefined,\n      };\n    }\n\n    if (contentType && contentType.includes('application/json')) {\n      try {\n        data = JSON.parse(responseText);\n      } catch (_jsonError) {\n        return {\n          success: false,\n          message: `Ошибка сервера ${response.status}: Неверный формат ответа`,\n        };\n      }\n    } else {\n      if (!response.ok) {\n        return {\n          success: false,\n          message: `Ошибка сервера ${response.status}: ${responseText.substring(0, 200)}`,\n        };\n      }\n      return {\n        success: true,\n        data: responseText as any,\n      };\n    }\n\n    if (!response.ok) {\n      const errorMessage = data?.message || data?.error || `Ошибка сервера: ${response.status} ${response.statusText || 'Internal Server Error'}`;\n      return {\n        success: false,\n        message: errorMessage,\n        data: data?.data,\n      };\n    }\n\n    return data;\n  } catch (error: any) {\n    return {\n      success: false,\n      message: error.message || 'Ошибка подключения к серверу',\n    };\n  }\n};\n\n","import React, { useState } from 'react';\nimport { motion } from 'framer-motion';\nimport { Shield, Lock, AlertCircle } from 'lucide-react';\nimport { getAdminApiUrl, ADMIN_API_CONFIG } from '../config/api';\n\ninterface AdminLoginProps {\n  onLogin: (token: string) => void;\n}\n\nexport const AdminLogin: React.FC<AdminLoginProps> = ({ onLogin }) => {\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError('');\n    setIsLoading(true);\n\n    try {\n      const response = await fetch(getAdminApiUrl(ADMIN_API_CONFIG.endpoints.adminLogin), {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ username, password }),\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        if (data.success && data.data?.token) {\n          onLogin(data.data.token);\n        } else {\n          setError('Неверный логин или пароль');\n        }\n      } else {\n        const errorData = await response.json().catch(() => ({}));\n        setError(errorData.message || 'Неверный логин или пароль');\n      }\n    } catch (_err) {\n      setError('Ошибка подключения к серверу');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 dark:from-slate-900 dark:via-slate-800 dark:to-indigo-900 flex items-center justify-center p-4\">\n      <motion.div\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n        className=\"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl p-8 w-full max-w-md\"\n      >\n        <div className=\"text-center mb-8\">\n          <div className=\"w-16 h-16 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center mx-auto mb-4\">\n            <Shield className=\"w-8 h-8 text-white\" />\n          </div>\n          <h1 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-2\">\n            Админ-панель\n          </h1>\n          <p className=\"text-sm text-gray-500 dark:text-gray-400\">\n            Войдите для доступа к управлению\n          </p>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n              Логин\n            </label>\n            <div className=\"relative\">\n              <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                <Lock className=\"w-5 h-5 text-gray-400\" />\n              </div>\n              <input\n                type=\"text\"\n                value={username}\n                onChange={(e) => setUsername(e.target.value)}\n                className=\"block w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                placeholder=\"Введите логин\"\n                required\n              />\n            </div>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n              Пароль\n            </label>\n            <div className=\"relative\">\n              <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                <Lock className=\"w-5 h-5 text-gray-400\" />\n              </div>\n              <input\n                type=\"password\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                className=\"block w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                placeholder=\"Введите пароль\"\n                required\n              />\n            </div>\n          </div>\n\n          {error && (\n            <motion.div\n              initial={{ opacity: 0, y: -10 }}\n              animate={{ opacity: 1, y: 0 }}\n              className=\"flex items-center space-x-2 text-sm text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 p-3 rounded-lg\"\n            >\n              <AlertCircle className=\"w-4 h-4\" />\n              <span>{error}</span>\n            </motion.div>\n          )}\n\n          <button\n            type=\"submit\"\n            disabled={isLoading}\n            className=\"w-full py-2.5 px-4 bg-gradient-to-r from-blue-500 to-indigo-600 text-white font-medium rounded-lg hover:from-blue-600 hover:to-indigo-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all\"\n          >\n            {isLoading ? 'Вход...' : 'Войти'}\n          </button>\n        </form>\n      </motion.div>\n    </div>\n  );\n};\n\n","import React, { createContext, useContext, useState, useCallback } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { CheckCircle, XCircle, AlertCircle, Info, X } from 'lucide-react';\n\ntype ToastType = 'success' | 'error' | 'warning' | 'info';\n\ninterface Toast {\n  id: string;\n  type: ToastType;\n  message: string;\n  duration?: number;\n}\n\ninterface ToastContextType {\n  showToast: (type: ToastType, message: string, duration?: number) => void;\n}\n\nconst ToastContext = createContext<ToastContextType | undefined>(undefined);\n\nexport const useToast = () => {\n  const context = useContext(ToastContext);\n  if (!context) {\n    throw new Error('useToast must be used within ToastProvider');\n  }\n  return context;\n};\n\nexport const ToastProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  const [toasts, setToasts] = useState<Toast[]>([]);\n\n  const showToast = useCallback((type: ToastType, message: string, duration = 3000) => {\n    const id = Math.random().toString(36).substr(2, 9);\n    const toast: Toast = { id, type, message, duration };\n    \n    setToasts((prev) => [...prev, toast]);\n    \n    setTimeout(() => {\n      setToasts((prev) => prev.filter((t) => t.id !== id));\n    }, duration);\n  }, []);\n\n  const removeToast = useCallback((id: string) => {\n    setToasts((prev) => prev.filter((t) => t.id !== id));\n  }, []);\n\n  const getIcon = (type: ToastType) => {\n    switch (type) {\n      case 'success':\n        return <CheckCircle className=\"w-5 h-5\" />;\n      case 'error':\n        return <XCircle className=\"w-5 h-5\" />;\n      case 'warning':\n        return <AlertCircle className=\"w-5 h-5\" />;\n      case 'info':\n        return <Info className=\"w-5 h-5\" />;\n    }\n  };\n\n  const getColors = (type: ToastType) => {\n    switch (type) {\n      case 'success':\n        return 'bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800 text-green-800 dark:text-green-200';\n      case 'error':\n        return 'bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800 text-red-800 dark:text-red-200';\n      case 'warning':\n        return 'bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800 text-yellow-800 dark:text-yellow-200';\n      case 'info':\n        return 'bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800 text-blue-800 dark:text-blue-200';\n    }\n  };\n\n  return (\n    <ToastContext.Provider value={{ showToast }}>\n      {children}\n      <div className=\"fixed top-4 right-4 z-50 space-y-2\">\n        <AnimatePresence>\n          {toasts.map((toast) => (\n            <motion.div\n              key={toast.id}\n              initial={{ opacity: 0, x: 300 }}\n              animate={{ opacity: 1, x: 0 }}\n              exit={{ opacity: 0, x: 300 }}\n              className={`flex items-center space-x-3 px-4 py-3 rounded-lg border shadow-lg ${getColors(toast.type)}`}\n            >\n              {getIcon(toast.type)}\n              <span className=\"text-sm font-medium\">{toast.message}</span>\n              <button\n                onClick={() => removeToast(toast.id)}\n                className=\"ml-2 hover:opacity-70\"\n              >\n                <X className=\"w-4 h-4\" />\n              </button>\n            </motion.div>\n          ))}\n        </AnimatePresence>\n      </div>\n    </ToastContext.Provider>\n  );\n};\n\n","import React, { useState, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport { Building2, Users, Search, ChevronDown, ChevronUp, AlertCircle, RefreshCw } from 'lucide-react';\nimport { useToast } from '../components/Toast';\nimport { adminApiRequest, ADMIN_API_CONFIG } from '../config/api';\n\ninterface Company {\n  id: string;\n  name: string;\n  createdAt: string;\n  userCount: number;\n  users: Array<{\n    id: string;\n    username: string;\n    role: 'owner' | 'manager' | 'viewer';\n  }>;\n}\n\nexport const CompaniesTab: React.FC = () => {\n  const [companies, setCompanies] = useState<Company[]>([]);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [expandedCompany, setExpandedCompany] = useState<string | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const { showToast } = useToast();\n\n  const loadCompanies = async () => {\n    setIsLoading(true);\n    setError(null);\n    try {\n      const data = await adminApiRequest<Company[]>(ADMIN_API_CONFIG.endpoints.adminCompaniesList);\n      if (data.success && data.data) {\n        setCompanies(data.data);\n      } else {\n        const errorMsg = data.message || 'Ошибка сервера: не удалось загрузить компании';\n        setError(errorMsg);\n        showToast('error', errorMsg);\n      }\n    } catch (error: any) {\n      const errorMsg = error?.message || 'Ошибка при загрузке компаний';\n      setError(errorMsg);\n      showToast('error', errorMsg);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    loadCompanies();\n  }, []);\n\n  const filteredCompanies = companies.filter((company) =>\n    company.name.toLowerCase().includes(searchQuery.toLowerCase())\n  );\n\n  const getRoleBadge = (role: string) => {\n    const colors = {\n      owner: 'bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400',\n      manager: 'bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400',\n      viewer: 'bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300',\n    };\n    return colors[role as keyof typeof colors] || colors.viewer;\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500\"></div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"space-y-6\">\n        <div className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-6\">\n          <div className=\"flex items-start space-x-3\">\n            <AlertCircle className=\"w-6 h-6 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5\" />\n            <div className=\"flex-1\">\n              <h3 className=\"text-lg font-semibold text-red-900 dark:text-red-200 mb-2\">\n                Ошибка загрузки данных\n              </h3>\n              <p className=\"text-red-700 dark:text-red-300 mb-4\">{error}</p>\n              <button\n                onClick={loadCompanies}\n                className=\"flex items-center space-x-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors\"\n              >\n                <RefreshCw className=\"w-4 h-4\" />\n                <span>Повторить попытку</span>\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">Компании</h2>\n          <p className=\"text-sm text-gray-500 dark:text-gray-400 mt-1\">\n            Всего компаний: {companies.length}\n          </p>\n        </div>\n      </div>\n\n      {/* Search */}\n      <div className=\"relative\">\n        <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n          <Search className=\"w-5 h-5 text-gray-400\" />\n        </div>\n        <input\n          type=\"text\"\n          value={searchQuery}\n          onChange={(e) => setSearchQuery(e.target.value)}\n          placeholder=\"Поиск по названию компании...\"\n          className=\"block w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n        />\n      </div>\n\n      {/* Companies List */}\n      <div className=\"space-y-4\">\n        {filteredCompanies.length === 0 ? (\n          <div className=\"text-center py-12\">\n            <Building2 className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n            <p className=\"text-gray-500 dark:text-gray-400\">\n              {searchQuery ? 'Компании не найдены' : 'Нет компаний'}\n            </p>\n          </div>\n        ) : (\n          filteredCompanies.map((company) => (\n            <motion.div\n              key={company.id}\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              className=\"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden\"\n            >\n              <div\n                className=\"p-4 cursor-pointer hover:bg-gray-50 dark:hover:bg-slate-700 transition-colors\"\n                onClick={() => setExpandedCompany(expandedCompany === company.id ? null : company.id)}\n              >\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex items-center space-x-3 flex-1\">\n                    <div className=\"w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center flex-shrink-0\">\n                      <Building2 className=\"w-6 h-6 text-white\" />\n                    </div>\n                    <div className=\"flex-1 min-w-0\">\n                      <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white truncate\">\n                        {company.name}\n                      </h3>\n                      <div className=\"flex items-center space-x-4 mt-1\">\n                        <div className=\"flex items-center space-x-1 text-sm text-gray-500 dark:text-gray-400\">\n                          <Users className=\"w-4 h-4\" />\n                          <span>{company.userCount} пользователей</span>\n                        </div>\n                        <span className=\"text-sm text-gray-500 dark:text-gray-400\">\n                          Создана: {new Date(company.createdAt).toLocaleDateString('ru-RU')}\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                  {expandedCompany === company.id ? (\n                    <ChevronUp className=\"w-5 h-5 text-gray-400 flex-shrink-0\" />\n                  ) : (\n                    <ChevronDown className=\"w-5 h-5 text-gray-400 flex-shrink-0\" />\n                  )}\n                </div>\n              </div>\n\n              {expandedCompany === company.id && (\n                <motion.div\n                  initial={{ height: 0, opacity: 0 }}\n                  animate={{ height: 'auto', opacity: 1 }}\n                  exit={{ height: 0, opacity: 0 }}\n                  className=\"border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-slate-900/50\"\n                >\n                  <div className=\"p-4 space-y-2\">\n                    <h4 className=\"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3\">\n                      Пользователи:\n                    </h4>\n                    {company.users.map((user) => (\n                      <div\n                        key={user.id}\n                        className=\"flex items-center justify-between p-2 bg-white dark:bg-slate-800 rounded-lg\"\n                      >\n                        <span className=\"text-sm text-gray-900 dark:text-white\">{user.username}</span>\n                        <span\n                          className={`px-2 py-1 text-xs font-medium rounded-full ${getRoleBadge(user.role)}`}\n                        >\n                          {user.role}\n                        </span>\n                      </div>\n                    ))}\n                  </div>\n                </motion.div>\n              )}\n            </motion.div>\n          ))\n        )}\n      </div>\n    </div>\n  );\n};\n\n","import React, { useState, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport { FileText, Edit, Save, X } from 'lucide-react';\nimport { useToast } from '../components/Toast';\nimport { adminApiRequest, ADMIN_API_CONFIG } from '../config/api';\n\ninterface LegalDoc {\n  id: string;\n  title: string;\n  content: string;\n  updatedAt: string;\n}\n\nexport const LegalDocsTab: React.FC = () => {\n  const [docs, setDocs] = useState<LegalDoc[]>([]);\n  const [editingId, setEditingId] = useState<string | null>(null);\n  const [editContent, setEditContent] = useState('');\n  const [isLoading, setIsLoading] = useState(true);\n  const { showToast } = useToast();\n\n  const loadDocs = async () => {\n    setIsLoading(true);\n    try {\n      const data = await adminApiRequest<LegalDoc[]>(ADMIN_API_CONFIG.endpoints.adminLegalDocsList);\n      if (data.success && data.data) {\n        setDocs(data.data);\n      } else {\n        const errorMsg = data.message || 'Ошибка сервера: не удалось загрузить документы';\n        showToast('error', errorMsg);\n      }\n    } catch (error: any) {\n      showToast('error', error?.message || 'Ошибка при загрузке документов');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    loadDocs();\n  }, []);\n\n  const handleEdit = (doc: LegalDoc) => {\n    setEditingId(doc.id);\n    setEditContent(doc.content);\n  };\n\n  const handleSave = async (id: string) => {\n    // Валидация\n    if (!editContent.trim()) {\n      showToast('error', 'Содержимое документа не может быть пустым');\n      return;\n    }\n    if (editContent.length > 100000) {\n      showToast('error', 'Содержимое документа слишком большое (максимум 100000 символов)');\n      return;\n    }\n\n    try {\n      const data = await adminApiRequest(ADMIN_API_CONFIG.endpoints.adminLegalDocsUpdate, {\n        method: 'POST',\n        body: JSON.stringify({ id, content: editContent }),\n      });\n      if (data.success) {\n        showToast('success', 'Документ обновлен');\n        await loadDocs();\n        setEditingId(null);\n        setEditContent('');\n      } else {\n        showToast('error', data.message || 'Не удалось обновить документ');\n      }\n    } catch (_error) {\n      showToast('error', 'Ошибка при обновлении документа');\n    }\n  };\n\n  const handleCancel = () => {\n    setEditingId(null);\n    setEditContent('');\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">Юридические документы</h2>\n          <p className=\"text-sm text-gray-500 dark:text-gray-400 mt-1\">\n            Управление документами для модалки AgreementModal\n          </p>\n        </div>\n      </div>\n\n      {/* Documents List */}\n      <div className=\"space-y-4\">\n        {docs.length === 0 ? (\n          <div className=\"text-center py-12\">\n            <FileText className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n            <p className=\"text-gray-500 dark:text-gray-400\">Нет документов</p>\n          </div>\n        ) : (\n          docs.map((doc) => (\n            <motion.div\n              key={doc.id}\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              className=\"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden\"\n            >\n              <div className=\"p-4\">\n                <div className=\"flex items-center justify-between mb-3\">\n                  <div className=\"flex items-center space-x-3\">\n                    <div className=\"w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-600 rounded-lg flex items-center justify-center\">\n                      <FileText className=\"w-5 h-5 text-white\" />\n                    </div>\n                    <div>\n                      <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n                        {doc.title}\n                      </h3>\n                      <p className=\"text-xs text-gray-500 dark:text-gray-400\">\n                        Обновлено: {new Date(doc.updatedAt).toLocaleDateString('ru-RU')}\n                      </p>\n                    </div>\n                  </div>\n                  {editingId !== doc.id && (\n                    <button\n                      onClick={() => handleEdit(doc)}\n                      className=\"flex items-center space-x-2 px-3 py-2 text-sm font-medium text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors\"\n                    >\n                      <Edit className=\"w-4 h-4\" />\n                      <span>Редактировать</span>\n                    </button>\n                  )}\n                </div>\n\n                {editingId === doc.id ? (\n                  <div className=\"space-y-3\">\n                    <textarea\n                      value={editContent}\n                      onChange={(e) => setEditContent(e.target.value)}\n                      rows={10}\n                      className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none\"\n                    />\n                    <div className=\"flex items-center space-x-2\">\n                      <button\n                        onClick={() => handleSave(doc.id)}\n                        className=\"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n                      >\n                        <Save className=\"w-4 h-4\" />\n                        <span>Сохранить</span>\n                      </button>\n                      <button\n                        onClick={handleCancel}\n                        className=\"flex items-center space-x-2 px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors\"\n                      >\n                        <X className=\"w-4 h-4\" />\n                        <span>Отмена</span>\n                      </button>\n                    </div>\n                  </div>\n                ) : (\n                  <div className=\"prose dark:prose-invert max-w-none\">\n                    <p className=\"text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap\">\n                      {doc.content}\n                    </p>\n                  </div>\n                )}\n              </div>\n            </motion.div>\n          ))\n        )}\n      </div>\n    </div>\n  );\n};\n\n","import React, { useState, useRef, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport { Database, Upload, FileText, Trash2 } from 'lucide-react';\nimport { useToast } from '../components/Toast';\nimport { adminApiRequest, ADMIN_API_CONFIG } from '../config/api';\n\ninterface AIDocument {\n  id: string;\n  filename: string;\n  size: number;\n  uploadedAt: string;\n  status: 'processed' | 'processing' | 'error';\n}\n\nexport const AIDocumentsTab: React.FC = () => {\n  const [documents, setDocuments] = useState<AIDocument[]>([]);\n  const [isUploading, setIsUploading] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const { showToast } = useToast();\n\n  const loadDocuments = async () => {\n    setIsLoading(true);\n    try {\n      const data = await adminApiRequest<AIDocument[]>(ADMIN_API_CONFIG.endpoints.adminAiDocsList);\n      if (data.success && data.data) {\n        setDocuments(data.data);\n      } else {\n        const errorMsg = data.message || 'Ошибка сервера: не удалось загрузить документы';\n        showToast('error', errorMsg);\n      }\n    } catch (error: any) {\n      showToast('error', error?.message || 'Ошибка при загрузке документов');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    loadDocuments();\n  }, []);\n\n  const handleUpload = async (files: FileList | null) => {\n    if (!files || files.length === 0) return;\n\n    // Валидация файлов\n    const maxSize = 50 * 1024 * 1024; // 50 MB\n    const allowedTypes = ['.pdf', '.doc', '.docx', '.txt'];\n    const invalidFiles: string[] = [];\n\n    Array.from(files).forEach((file) => {\n      const ext = '.' + file.name.split('.').pop()?.toLowerCase();\n      if (!allowedTypes.includes(ext)) {\n        invalidFiles.push(file.name);\n      }\n      if (file.size > maxSize) {\n        invalidFiles.push(`${file.name} (слишком большой)`);\n      }\n    });\n\n    if (invalidFiles.length > 0) {\n      showToast('error', `Некорректные файлы: ${invalidFiles.join(', ')}`);\n      return;\n    }\n\n    setIsUploading(true);\n    showToast('info', 'Загрузка документов...');\n\n    // TODO: Реализовать загрузку файлов через API\n    await new Promise((resolve) => setTimeout(resolve, 1500));\n\n    showToast('success', 'Документы загружены');\n    setIsUploading(false);\n    await loadDocuments();\n\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n\n  const handleDelete = async (id: string) => {\n    try {\n      const data = await adminApiRequest(ADMIN_API_CONFIG.endpoints.adminAiDocsDelete, {\n        method: 'POST',\n        body: JSON.stringify({ id }),\n      });\n      if (data.success) {\n        showToast('success', 'Документ удален');\n        await loadDocuments();\n      } else {\n        showToast('error', data.message || 'Не удалось удалить документ');\n      }\n    } catch (_error) {\n      showToast('error', 'Ошибка при удалении документа');\n    }\n  };\n\n  const formatFileSize = (bytes: number) => {\n    if (bytes === 0) return '0 Bytes';\n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return Math.round(bytes / Math.pow(k, i) * 100) / 100 + ' ' + sizes[i];\n  };\n\n  const getStatusBadge = (status: string) => {\n    const styles = {\n      processed: 'bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400',\n      processing: 'bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400',\n      error: 'bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400',\n    };\n    return styles[status as keyof typeof styles] || styles.processed;\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">Документы для ИИ</h2>\n          <p className=\"text-sm text-gray-500 dark:text-gray-400 mt-1\">\n            Загружайте документы для обучения AI модели\n          </p>\n        </div>\n        <button\n          onClick={() => fileInputRef.current?.click()}\n          disabled={isUploading}\n          className=\"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-blue-500 to-indigo-600 text-white font-medium rounded-lg hover:from-blue-600 hover:to-indigo-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all\"\n        >\n          <Upload className=\"w-4 h-4\" />\n          <span>{isUploading ? 'Загрузка...' : 'Загрузить документы'}</span>\n        </button>\n        <input\n          ref={fileInputRef}\n          type=\"file\"\n          multiple\n          accept=\".pdf,.doc,.docx,.txt\"\n          onChange={(e) => handleUpload(e.target.files)}\n          className=\"hidden\"\n        />\n      </div>\n\n      {/* Upload Area */}\n      {isUploading && (\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          className=\"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4\"\n        >\n          <div className=\"flex items-center space-x-3\">\n            <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-500\"></div>\n            <span className=\"text-sm text-blue-700 dark:text-blue-300\">Загрузка документов...</span>\n          </div>\n        </motion.div>\n      )}\n\n      {/* Documents List */}\n      <div className=\"space-y-4\">\n        {documents.length === 0 ? (\n          <div className=\"text-center py-12 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-xl\">\n            <Database className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n            <p className=\"text-gray-500 dark:text-gray-400 mb-2\">Нет загруженных документов</p>\n            <p className=\"text-sm text-gray-400 dark:text-gray-500\">\n              Загрузите документы для обучения AI\n            </p>\n          </div>\n        ) : (\n          documents.map((doc) => (\n            <motion.div\n              key={doc.id}\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              className=\"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-4\"\n            >\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center space-x-3 flex-1 min-w-0\">\n                  <div className=\"w-10 h-10 bg-gradient-to-br from-green-500 to-emerald-600 rounded-lg flex items-center justify-center flex-shrink-0\">\n                    <FileText className=\"w-5 h-5 text-white\" />\n                  </div>\n                  <div className=\"flex-1 min-w-0\">\n                    <h3 className=\"text-sm font-semibold text-gray-900 dark:text-white truncate\">\n                      {doc.filename}\n                    </h3>\n                    <div className=\"flex items-center space-x-3 mt-1\">\n                      <span className=\"text-xs text-gray-500 dark:text-gray-400\">\n                        {formatFileSize(doc.size)}\n                      </span>\n                      <span\n                        className={`px-2 py-0.5 text-xs font-medium rounded-full ${getStatusBadge(doc.status)}`}\n                      >\n                        {doc.status === 'processed' ? 'Обработан' : doc.status === 'processing' ? 'Обработка' : 'Ошибка'}\n                      </span>\n                      <span className=\"text-xs text-gray-500 dark:text-gray-400\">\n                        {new Date(doc.uploadedAt).toLocaleDateString('ru-RU')}\n                      </span>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"flex items-center space-x-2 flex-shrink-0 ml-4\">\n                  <button\n                    onClick={() => handleDelete(doc.id)}\n                    className=\"p-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors\"\n                    title=\"Удалить\"\n                  >\n                    <Trash2 className=\"w-4 h-4\" />\n                  </button>\n                </div>\n              </div>\n            </motion.div>\n          ))\n        )}\n      </div>\n    </div>\n  );\n};\n\n","import React, { useState, useEffect } from 'react';\nimport { Download, Trash2, RefreshCw, HardDrive, Clock } from 'lucide-react';\nimport { adminApiRequest, ADMIN_API_CONFIG } from '../config/api';\nimport { useToast } from '../components/Toast';\n\ninterface Backup {\n  id: string;\n  filename: string;\n  file_path: string;\n  file_size: number;\n  created_at: string;\n  status: string;\n}\n\nexport const BackupsTab: React.FC = () => {\n  const [backups, setBackups] = useState<Backup[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isCreating, setIsCreating] = useState(false);\n  const { showToast } = useToast();\n\n  const loadBackups = async () => {\n    setIsLoading(true);\n    try {\n      const data = await adminApiRequest<Backup[]>(ADMIN_API_CONFIG.endpoints.backupList);\n      if (data.success && data.data) {\n        setBackups(data.data);\n      } else {\n        const errorMsg = data.message || 'Не удалось загрузить бэкапы';\n        showToast('error', errorMsg);\n      }\n    } catch (error: any) {\n      showToast('error', error?.message || 'Ошибка при загрузке бэкапов');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    loadBackups();\n  }, []);\n\n  const handleCreateBackup = async () => {\n    setIsCreating(true);\n    try {\n      const data = await adminApiRequest(ADMIN_API_CONFIG.endpoints.backupCreate, {\n        method: 'POST',\n      });\n      if (data.success) {\n        await loadBackups();\n        alert('Бэкап создан успешно');\n      } else {\n        alert(`Ошибка: ${data.message || 'Не удалось создать бэкап'}`);\n      }\n    } catch (_error) {\n      alert('Ошибка при создании бэкапа');\n    } finally {\n      setIsCreating(false);\n    }\n  };\n\n  const handleRestore = async (backupId: string, filePath: string) => {\n    if (!confirm('ВНИМАНИЕ: Это действие перезапишет текущую базу данных. Продолжить?')) {\n      return;\n    }\n    try {\n      const data = await adminApiRequest(ADMIN_API_CONFIG.endpoints.backupRestore, {\n        method: 'POST',\n        body: JSON.stringify({ backup_id: backupId, file_path: filePath }),\n      });\n      if (data.success) {\n        alert('Бэкап восстановлен успешно');\n      } else {\n        alert(`Ошибка: ${data.message || 'Не удалось восстановить бэкап'}`);\n      }\n    } catch (_error) {\n      alert('Ошибка при восстановлении бэкапа');\n    }\n  };\n\n  const handleDelete = async (backupId: string) => {\n    if (!confirm('Удалить этот бэкап?')) {\n      return;\n    }\n    try {\n      const data = await adminApiRequest(ADMIN_API_CONFIG.endpoints.backupDelete, {\n        method: 'POST',\n        body: JSON.stringify({ backup_id: backupId }),\n      });\n      if (data.success) {\n        await loadBackups();\n        alert('Бэкап удален');\n      } else {\n        alert(`Ошибка: ${data.message || 'Не удалось удалить бэкап'}`);\n      }\n    } catch (_error) {\n      alert('Ошибка при удалении бэкапа');\n    }\n  };\n\n  const formatFileSize = (bytes: number) => {\n    if (bytes === 0) return '0 B';\n    const k = 1024;\n    const sizes = ['B', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return Math.round(bytes / Math.pow(k, i) * 100) / 100 + ' ' + sizes[i];\n  };\n\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleString('ru-RU');\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">Бэкапы базы данных</h2>\n        <button\n          onClick={handleCreateBackup}\n          disabled={isCreating}\n          className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2\"\n        >\n          {isCreating ? (\n            <>\n              <RefreshCw className=\"w-4 h-4 animate-spin\" />\n              Создание...\n            </>\n          ) : (\n            <>\n              <Download className=\"w-4 h-4\" />\n              Создать бэкап\n            </>\n          )}\n        </button>\n      </div>\n\n      {backups.length === 0 ? (\n        <div className=\"text-center py-12 text-gray-500 dark:text-gray-400\">\n          <HardDrive className=\"w-16 h-16 mx-auto mb-4 opacity-50\" />\n          <p>Нет бэкапов</p>\n        </div>\n      ) : (\n        <div className=\"bg-white dark:bg-slate-800 rounded-lg shadow overflow-hidden\">\n          <table className=\"min-w-full divide-y divide-gray-200 dark:divide-gray-700\">\n            <thead className=\"bg-gray-50 dark:bg-slate-700\">\n              <tr>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                  Файл\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                  Размер\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                  Дата создания\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                  Статус\n                </th>\n                <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                  Действия\n                </th>\n              </tr>\n            </thead>\n            <tbody className=\"bg-white dark:bg-slate-800 divide-y divide-gray-200 dark:divide-gray-700\">\n              {backups.map((backup) => (\n                <tr key={backup.id} className=\"hover:bg-gray-50 dark:hover:bg-slate-700\">\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white\">\n                    {backup.filename}\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400\">\n                    {formatFileSize(backup.file_size)}\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400\">\n                    <div className=\"flex items-center gap-2\">\n                      <Clock className=\"w-4 h-4\" />\n                      {formatDate(backup.created_at)}\n                    </div>\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    <span className={`px-2 py-1 text-xs rounded-full ${\n                      backup.status === 'completed' \n                        ? 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400'\n                        : backup.status === 'failed'\n                        ? 'bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400'\n                        : 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400'\n                    }`}>\n                      {backup.status}\n                    </span>\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\">\n                    <div className=\"flex justify-end gap-2\">\n                      <button\n                        onClick={() => handleRestore(backup.id, backup.file_path)}\n                        className=\"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300\"\n                      >\n                        Восстановить\n                      </button>\n                      <button\n                        onClick={() => handleDelete(backup.id)}\n                        className=\"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300\"\n                      >\n                        <Trash2 className=\"w-4 h-4\" />\n                      </button>\n                    </div>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      )}\n    </div>\n  );\n};\n\n","import React, { useState, useEffect } from 'react';\nimport { RefreshCw, CheckCircle, XCircle, AlertCircle, Server, Cpu, HardDrive, MemoryStick, TrendingUp } from 'lucide-react';\nimport { useToast } from '../components/Toast';\nimport { adminApiRequest, ADMIN_API_CONFIG } from '../config/api';\n\ninterface SystemMetrics {\n  cpu_usage_percent: number;\n  memory_total_mb: number;\n  memory_used_mb: number;\n  memory_available_mb: number;\n  memory_usage_percent: number;\n  disk_total_gb: number;\n  disk_used_gb: number;\n  disk_available_gb: number;\n  disk_usage_percent: number;\n}\n\ninterface HealthCheck {\n  service_name: string;\n  status: string;\n  response_time_ms?: number;\n  error_message?: string;\n  checked_at: string;\n  metrics?: SystemMetrics;\n}\n\ninterface SystemStatus {\n  overall_status: string;\n  services_status: Record<string, string>;\n  last_checked_at: string;\n  system_metrics?: SystemMetrics;\n}\n\nexport const HealthChecksTab: React.FC = () => {\n  const [systemStatus, setSystemStatus] = useState<SystemStatus | null>(null);\n  const [healthChecks, setHealthChecks] = useState<HealthCheck[]>([]);\n  const [_isLoading, _setIsLoading] = useState(true);\n  const [isChecking, setIsChecking] = useState(false);\n  const { showToast } = useToast();\n\n  const loadHealthChecks = async () => {\n    _setIsLoading(true);\n    try {\n      const data = await adminApiRequest(ADMIN_API_CONFIG.endpoints.healthCheckList);\n      if (data.success && data.data) {\n        if (data.data.system_status) {\n          setSystemStatus(data.data.system_status);\n        }\n        if (data.data.health_checks) {\n          setHealthChecks(data.data.health_checks);\n        }\n      } else {\n        showToast('error', data.message || 'Не удалось загрузить health checks');\n      }\n    } catch (_error) {\n      showToast('error', 'Ошибка при загрузке health checks');\n    } finally {\n      _setIsLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    loadHealthChecks();\n  }, []);\n\n  const handleCheckAll = async () => {\n    setIsChecking(true);\n    try {\n      const data = await adminApiRequest(ADMIN_API_CONFIG.endpoints.healthCheck, {\n        method: 'POST',\n        body: JSON.stringify({ service: 'all' }),\n      });\n      if (data.success) {\n        await loadHealthChecks();\n        showToast('success', 'Проверка завершена');\n      } else {\n        showToast('error', data.message || 'Не удалось выполнить проверку');\n      }\n    } catch (_error) {\n      showToast('error', 'Ошибка при проверке здоровья системы');\n    } finally {\n      setIsChecking(false);\n    }\n  };\n\n  const handleCheckService = async (serviceName: string) => {\n    try {\n      const data = await adminApiRequest(ADMIN_API_CONFIG.endpoints.healthCheck, {\n        method: 'POST',\n        body: JSON.stringify({ service: serviceName }),\n      });\n      if (data.success) {\n        await loadHealthChecks();\n        showToast('success', `Проверка ${serviceName} завершена`);\n      } else {\n        showToast('error', data.message || 'Не удалось выполнить проверку');\n      }\n    } catch (_error) {\n      showToast('error', 'Ошибка при проверке сервиса');\n    }\n  };\n\n  // Получить историю метрик для графиков\n  const getMetricsHistory = () => {\n    const systemChecks = healthChecks\n      .filter((check) => check.service_name === 'system' && check.metrics)\n      .sort((a, b) => new Date(a.checked_at).getTime() - new Date(b.checked_at).getTime())\n      .slice(-20); // Последние 20 проверок\n\n    return {\n      cpu: systemChecks.map((check) => ({\n        value: check.metrics?.cpu_usage_percent || 0,\n        time: new Date(check.checked_at).toLocaleTimeString('ru-RU', { hour: '2-digit', minute: '2-digit' }),\n      })),\n      memory: systemChecks.map((check) => ({\n        value: check.metrics?.memory_usage_percent || 0,\n        time: new Date(check.checked_at).toLocaleTimeString('ru-RU', { hour: '2-digit', minute: '2-digit' }),\n      })),\n      disk: systemChecks.map((check) => ({\n        value: check.metrics?.disk_usage_percent || 0,\n        time: new Date(check.checked_at).toLocaleTimeString('ru-RU', { hour: '2-digit', minute: '2-digit' }),\n      })),\n    };\n  };\n\n  const metricsHistory = getMetricsHistory();\n\n  const renderChart = (data: Array<{ value: number; time: string }>, color: string, label: string) => {\n    if (data.length === 0) return null;\n\n    const maxValue = Math.max(...data.map((d) => d.value), 100);\n    const chartHeight = 100;\n\n    return (\n      <div className=\"bg-white dark:bg-slate-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700\">\n        <div className=\"flex items-center gap-2 mb-3\">\n          <TrendingUp className=\"w-4 h-4 text-gray-500\" />\n          <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">{label}</span>\n        </div>\n        <div className=\"relative\" style={{ height: `${chartHeight}px` }}>\n          <svg width=\"100%\" height={chartHeight} className=\"overflow-visible\">\n            <polyline\n              points={data\n                .map((d, i) => {\n                  const x = (i / (data.length - 1 || 1)) * 100;\n                  const y = chartHeight - (d.value / maxValue) * chartHeight;\n                  return `${x}%,${y}`;\n                })\n                .join(' ')}\n              fill=\"none\"\n              stroke={color}\n              strokeWidth=\"2\"\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n            />\n            {data.map((d, i) => {\n              const x = (i / (data.length - 1 || 1)) * 100;\n              const y = chartHeight - (d.value / maxValue) * chartHeight;\n              return (\n                <circle\n                  key={i}\n                  cx={`${x}%`}\n                  cy={y}\n                  r=\"3\"\n                  fill={color}\n                  className=\"hover:r-4 transition-all\"\n                />\n              );\n            })}\n          </svg>\n          <div className=\"flex justify-between text-xs text-gray-500 dark:text-gray-400 mt-1\">\n            <span>{data[0]?.time}</span>\n            <span>{data[data.length - 1]?.time}</span>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  const getStatusIcon = (status: string) => {\n    switch (status) {\n      case 'healthy':\n        return <CheckCircle className=\"w-5 h-5 text-green-500\" />;\n      case 'unhealthy':\n        return <XCircle className=\"w-5 h-5 text-red-500\" />;\n      case 'degraded':\n        return <AlertCircle className=\"w-5 h-5 text-yellow-500\" />;\n      default:\n        return <AlertCircle className=\"w-5 h-5 text-gray-500\" />;\n    }\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'healthy':\n        return 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400';\n      case 'unhealthy':\n        return 'bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400';\n      case 'degraded':\n        return 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400';\n      default:\n        return 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300';\n    }\n  };\n\n  const services = ['n8n', 'postgresql', 'nginx', 'supabase-studio'];\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">Health Checks</h2>\n        <button\n          onClick={handleCheckAll}\n          disabled={isChecking}\n          className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2\"\n        >\n          {isChecking ? (\n            <>\n              <RefreshCw className=\"w-4 h-4 animate-spin\" />\n              Проверка...\n            </>\n          ) : (\n            <>\n              <RefreshCw className=\"w-4 h-4\" />\n              Проверить все\n            </>\n          )}\n        </button>\n      </div>\n\n      {systemStatus && (\n        <div className=\"bg-white dark:bg-slate-800 rounded-lg shadow p-6\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2\">\n              <Server className=\"w-5 h-5\" />\n              Общий статус системы\n            </h3>\n            <span className={`px-3 py-1 rounded-full text-sm font-medium ${getStatusColor(systemStatus.overall_status)}`}>\n              {systemStatus.overall_status}\n            </span>\n          </div>\n          <p className=\"text-sm text-gray-500 dark:text-gray-400 mb-4\">\n            Последняя проверка: {new Date(systemStatus.last_checked_at).toLocaleString('ru-RU')}\n          </p>\n          \n          {systemStatus.system_metrics && (\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4\">\n              {/* CPU */}\n              <div className=\"bg-gray-50 dark:bg-slate-700 rounded-lg p-4\">\n                <div className=\"flex items-center gap-2 mb-2\">\n                  <Cpu className=\"w-4 h-4 text-blue-500\" />\n                  <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">CPU</span>\n                </div>\n                <div className=\"text-2xl font-bold text-gray-900 dark:text-white\">\n                  {systemStatus.system_metrics.cpu_usage_percent.toFixed(1)}%\n                </div>\n                <div className=\"w-full bg-gray-200 dark:bg-slate-600 rounded-full h-2 mt-2\">\n                  <div\n                    className={`h-2 rounded-full ${\n                      systemStatus.system_metrics.cpu_usage_percent > 80\n                        ? 'bg-red-500'\n                        : systemStatus.system_metrics.cpu_usage_percent > 60\n                        ? 'bg-yellow-500'\n                        : 'bg-green-500'\n                    }`}\n                    style={{ width: `${Math.min(systemStatus.system_metrics.cpu_usage_percent, 100)}%` }}\n                  />\n                </div>\n              </div>\n\n              {/* Memory */}\n              <div className=\"bg-gray-50 dark:bg-slate-700 rounded-lg p-4\">\n                <div className=\"flex items-center gap-2 mb-2\">\n                  <MemoryStick className=\"w-4 h-4 text-purple-500\" />\n                  <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">Память</span>\n                </div>\n                <div className=\"text-2xl font-bold text-gray-900 dark:text-white\">\n                  {systemStatus.system_metrics.memory_usage_percent.toFixed(1)}%\n                </div>\n                <div className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                  {systemStatus.system_metrics.memory_used_mb} MB / {systemStatus.system_metrics.memory_total_mb} MB\n                </div>\n                <div className=\"w-full bg-gray-200 dark:bg-slate-600 rounded-full h-2 mt-2\">\n                  <div\n                    className={`h-2 rounded-full ${\n                      systemStatus.system_metrics.memory_usage_percent > 80\n                        ? 'bg-red-500'\n                        : systemStatus.system_metrics.memory_usage_percent > 60\n                        ? 'bg-yellow-500'\n                        : 'bg-green-500'\n                    }`}\n                    style={{ width: `${Math.min(systemStatus.system_metrics.memory_usage_percent, 100)}%` }}\n                  />\n                </div>\n              </div>\n\n              {/* Disk */}\n              <div className=\"bg-gray-50 dark:bg-slate-700 rounded-lg p-4\">\n                <div className=\"flex items-center gap-2 mb-2\">\n                  <HardDrive className=\"w-4 h-4 text-green-500\" />\n                  <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">Диск</span>\n                </div>\n                <div className=\"text-2xl font-bold text-gray-900 dark:text-white\">\n                  {systemStatus.system_metrics.disk_usage_percent.toFixed(1)}%\n                </div>\n                <div className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                  {systemStatus.system_metrics.disk_used_gb} GB / {systemStatus.system_metrics.disk_total_gb} GB\n                </div>\n                <div className=\"w-full bg-gray-200 dark:bg-slate-600 rounded-full h-2 mt-2\">\n                  <div\n                    className={`h-2 rounded-full ${\n                      systemStatus.system_metrics.disk_usage_percent > 80\n                        ? 'bg-red-500'\n                        : systemStatus.system_metrics.disk_usage_percent > 60\n                        ? 'bg-yellow-500'\n                        : 'bg-green-500'\n                    }`}\n                    style={{ width: `${Math.min(systemStatus.system_metrics.disk_usage_percent, 100)}%` }}\n                  />\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Графики метрик */}\n      {metricsHistory.cpu.length > 0 && (\n        <div className=\"mt-6\">\n          <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">История метрик</h3>\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            {renderChart(metricsHistory.cpu, '#3b82f6', 'CPU')}\n            {renderChart(metricsHistory.memory, '#a855f7', 'Память')}\n            {renderChart(metricsHistory.disk, '#10b981', 'Диск')}\n          </div>\n        </div>\n      )}\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mt-6\">\n        {services.map((service) => {\n          const serviceStatus = systemStatus?.services_status[service] || 'unknown';\n          const latestCheck = healthChecks\n            .filter((check) => check.service_name === service)\n            .sort((a, b) => new Date(b.checked_at).getTime() - new Date(a.checked_at).getTime())[0];\n\n          return (\n            <div\n              key={service}\n              className=\"bg-white dark:bg-slate-800 rounded-lg shadow p-6\"\n            >\n              <div className=\"flex items-center justify-between mb-4\">\n                <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white capitalize\">\n                  {service}\n                </h3>\n                <div className=\"flex items-center gap-2\">\n                  {getStatusIcon(serviceStatus)}\n                  <span className={`px-2 py-1 rounded text-xs font-medium ${getStatusColor(serviceStatus)}`}>\n                    {serviceStatus}\n                  </span>\n                </div>\n              </div>\n              {latestCheck && (\n                <div className=\"space-y-2 text-sm text-gray-600 dark:text-gray-400\">\n                  {latestCheck.response_time_ms && (\n                    <p>Время ответа: {latestCheck.response_time_ms} мс</p>\n                  )}\n                  {latestCheck.error_message && (\n                    <p className=\"text-red-600 dark:text-red-400\">\n                      Ошибка: {latestCheck.error_message}\n                    </p>\n                  )}\n                  <p className=\"text-xs\">\n                    Проверено: {new Date(latestCheck.checked_at).toLocaleString('ru-RU')}\n                  </p>\n                </div>\n              )}\n              <button\n                onClick={() => handleCheckService(service)}\n                className=\"mt-4 w-full px-4 py-2 bg-gray-100 dark:bg-slate-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-slate-600 flex items-center justify-center gap-2\"\n              >\n                <RefreshCw className=\"w-4 h-4\" />\n                Проверить\n              </button>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n\n","import React, { useState, useEffect } from 'react';\nimport { Search, Filter, Download, RefreshCw } from 'lucide-react';\nimport { useToast } from '../components/Toast';\nimport { adminApiRequest, ADMIN_API_CONFIG } from '../config/api';\n\ninterface LogEntry {\n  id: string;\n  action: string;\n  resourceType: string | null;\n  resourceId: string | null;\n  metadata: any;\n  ip: string | null;\n  userAgent: string | null;\n  createdAt: string;\n  user: {\n    username: string;\n    firstName: string;\n    lastName: string;\n  } | null;\n}\n\nexport const LogsTab: React.FC = () => {\n  const [logs, setLogs] = useState<LogEntry[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [filterAction, setFilterAction] = useState<string>('');\n  const [currentPage, setCurrentPage] = useState(1);\n  const [total, setTotal] = useState(0);\n  const [limit] = useState(50);\n  const { showToast } = useToast();\n\n  const loadLogs = async () => {\n    setIsLoading(true);\n    try {\n      const params = new URLSearchParams({\n        limit: limit.toString(),\n        offset: ((currentPage - 1) * limit).toString(),\n      });\n      if (filterAction) params.append('action', filterAction);\n\n      const endpoint = `${ADMIN_API_CONFIG.endpoints.adminLogsList}?${params}`;\n      const data = await adminApiRequest(endpoint);\n      if (data.success && data.data) {\n        setLogs(data.data);\n        setTotal(data.pagination?.total || 0);\n      } else {\n        const errorMsg = data.message || 'Ошибка сервера: не удалось загрузить логи';\n        showToast('error', errorMsg);\n      }\n    } catch (error: any) {\n      showToast('error', error?.message || 'Ошибка при загрузке логов');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    loadLogs();\n  }, [currentPage, filterAction]);\n\n  const filteredLogs = logs.filter((log) => {\n    if (!searchQuery) return true;\n    const query = searchQuery.toLowerCase();\n    return (\n      log.action.toLowerCase().includes(query) ||\n      log.user?.username?.toLowerCase().includes(query) ||\n      log.ip?.toLowerCase().includes(query) ||\n      JSON.stringify(log.metadata).toLowerCase().includes(query)\n    );\n  });\n\n  const uniqueActions = Array.from(new Set(logs.map((log) => log.action)));\n\n  const handleExport = () => {\n    const csv = [\n      ['ID', 'Action', 'Resource Type', 'User', 'IP', 'Created At'].join(','),\n      ...filteredLogs.map((log) =>\n        [\n          log.id,\n          log.action,\n          log.resourceType || '',\n          log.user?.username || 'System',\n          log.ip || '',\n          new Date(log.createdAt).toLocaleString('ru-RU'),\n        ].join(',')\n      ),\n    ].join('\\n');\n\n    const blob = new Blob([csv], { type: 'text/csv' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `logs-${new Date().toISOString().split('T')[0]}.csv`;\n    a.click();\n    URL.revokeObjectURL(url);\n    showToast('success', 'Логи экспортированы');\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">Логи системы</h2>\n          <p className=\"text-sm text-gray-500 dark:text-gray-400 mt-1\">\n            Всего записей: {total}\n          </p>\n        </div>\n        <div className=\"flex items-center space-x-2\">\n          <button\n            onClick={loadLogs}\n            className=\"flex items-center space-x-2 px-4 py-2 bg-gray-100 dark:bg-slate-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-slate-600 transition-colors\"\n          >\n            <RefreshCw className=\"w-4 h-4\" />\n            <span>Обновить</span>\n          </button>\n          <button\n            onClick={handleExport}\n            className=\"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n          >\n            <Download className=\"w-4 h-4\" />\n            <span>Экспорт CSV</span>\n          </button>\n        </div>\n      </div>\n\n      {/* Filters */}\n      <div className=\"flex items-center space-x-4\">\n        <div className=\"relative flex-1\">\n          <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n            <Search className=\"w-5 h-5 text-gray-400\" />\n          </div>\n          <input\n            type=\"text\"\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            placeholder=\"Поиск по логам...\"\n            className=\"block w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n          />\n        </div>\n        <div className=\"relative\">\n          <Filter className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400\" />\n          <select\n            value={filterAction}\n            onChange={(e) => {\n              setFilterAction(e.target.value);\n              setCurrentPage(1);\n            }}\n            className=\"pl-10 pr-8 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n          >\n            <option value=\"\">Все действия</option>\n            {uniqueActions.map((action) => (\n              <option key={action} value={action}>\n                {action}\n              </option>\n            ))}\n          </select>\n        </div>\n      </div>\n\n      {/* Logs List */}\n      <div className=\"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden\">\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full\">\n            <thead className=\"bg-gray-50 dark:bg-slate-900\">\n              <tr>\n                <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider\">\n                  Время\n                </th>\n                <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider\">\n                  Действие\n                </th>\n                <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider\">\n                  Пользователь\n                </th>\n                <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider\">\n                  Ресурс\n                </th>\n                <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider\">\n                  IP\n                </th>\n              </tr>\n            </thead>\n            <tbody className=\"divide-y divide-gray-200 dark:divide-gray-700\">\n              {filteredLogs.length === 0 ? (\n                <tr>\n                  <td colSpan={5} className=\"px-4 py-8 text-center text-gray-500 dark:text-gray-400\">\n                    Логи не найдены\n                  </td>\n                </tr>\n              ) : (\n                filteredLogs.map((log) => (\n                  <tr key={log.id} className=\"hover:bg-gray-50 dark:hover:bg-slate-700\">\n                    <td className=\"px-4 py-3 text-sm text-gray-900 dark:text-white\">\n                      {log.createdAt ? new Date(log.createdAt).toLocaleString('ru-RU') : '-'}\n                    </td>\n                    <td className=\"px-4 py-3 text-sm\">\n                      <span className=\"px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400\">\n                        {log.action}\n                      </span>\n                    </td>\n                    <td className=\"px-4 py-3 text-sm text-gray-900 dark:text-white\">\n                      {log.user ? `${log.user.username} (${log.user.firstName} ${log.user.lastName})` : 'System'}\n                    </td>\n                    <td className=\"px-4 py-3 text-sm text-gray-500 dark:text-gray-400\">\n                      {log.resourceType ? `${log.resourceType}:${log.resourceId?.substring(0, 8)}` : '-'}\n                    </td>\n                    <td className=\"px-4 py-3 text-sm text-gray-500 dark:text-gray-400\">\n                      {log.ip || '-'}\n                    </td>\n                  </tr>\n                ))\n              )}\n            </tbody>\n          </table>\n        </div>\n\n        {/* Pagination */}\n        {total > limit && (\n          <div className=\"px-4 py-3 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between\">\n            <div className=\"text-sm text-gray-500 dark:text-gray-400\">\n              Показано {((currentPage - 1) * limit) + 1} - {Math.min(currentPage * limit, total)} из {total}\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              <button\n                onClick={() => setCurrentPage((p) => Math.max(1, p - 1))}\n                disabled={currentPage === 1}\n                className=\"px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-slate-700 text-gray-700 dark:text-gray-300 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:hover:bg-slate-600\"\n              >\n                Назад\n              </button>\n              <span className=\"px-3 py-1 text-sm text-gray-700 dark:text-gray-300\">\n                Страница {currentPage} из {Math.ceil(total / limit)}\n              </span>\n              <button\n                onClick={() => setCurrentPage((p) => Math.min(Math.ceil(total / limit), p + 1))}\n                disabled={currentPage >= Math.ceil(total / limit)}\n                className=\"px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-slate-700 text-gray-700 dark:text-gray-300 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:hover:bg-slate-600\"\n              >\n                Вперед\n              </button>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\n","import React, { useState, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport { Users, Search, Settings, Edit, Save, X, Trash2, Sliders, RefreshCw } from 'lucide-react';\nimport { useToast } from '../components/Toast';\nimport { adminApiRequest, ADMIN_API_CONFIG } from '../config/api';\n\ninterface User {\n  id: string;\n  telegramId: number;\n  username: string | null;\n  firstName: string | null;\n  lastName: string | null;\n  createdAt: string;\n  lastLoginAt: string | null;\n  chatsCount: number;\n  companiesCount: number;\n  companies: Array<{\n    company_id: string;\n    role: string;\n  }>;\n}\n\ninterface UserLimit {\n  id: string;\n  userId: string;\n  limitType: string;\n  limitValue: number;\n  currentUsage: number;\n  resetAt: string | null;\n  user: {\n    username: string;\n    firstName: string;\n    lastName: string;\n  } | null;\n}\n\nexport const UsersTab: React.FC = () => {\n  const [users, setUsers] = useState<User[]>([]);\n  const [limits, setLimits] = useState<UserLimit[]>([]);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [expandedUser, setExpandedUser] = useState<string | null>(null);\n  const [editingLimit, setEditingLimit] = useState<string | null>(null);\n  const [editLimitValue, setEditLimitValue] = useState<number>(0);\n  const [isLoading, setIsLoading] = useState(true);\n  const [limitsModalUser, setLimitsModalUser] = useState<User | null>(null);\n  const [newLimitValue, setNewLimitValue] = useState<number>(100);\n  const { showToast } = useToast();\n\n  const loadUsers = async () => {\n    setIsLoading(true);\n    try {\n      const params = new URLSearchParams();\n      if (searchQuery) params.append('search', searchQuery);\n\n      const endpoint = `${ADMIN_API_CONFIG.endpoints.adminUsersList}?${params}`;\n      const data = await adminApiRequest(endpoint);\n      if (data.success && data.data) {\n        setUsers(data.data);\n      } else {\n        const errorMsg = data.message || 'Ошибка сервера: не удалось загрузить пользователей';\n        showToast('error', errorMsg);\n      }\n    } catch (error: any) {\n      showToast('error', error?.message || 'Ошибка при загрузке пользователей');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const loadLimits = async (userId?: string) => {\n    try {\n      const params = new URLSearchParams();\n      if (userId) params.append('user_id', userId);\n\n      const endpoint = `${ADMIN_API_CONFIG.endpoints.adminUserLimitsList}?${params}`;\n      const data = await adminApiRequest(endpoint);\n      if (data.success && data.data) {\n        setLimits(data.data);\n      }\n    } catch (error) {\n      console.error('Failed to load limits:', error);\n    }\n  };\n\n  useEffect(() => {\n    loadUsers();\n  }, []);\n\n  useEffect(() => {\n    if (expandedUser) {\n      loadLimits(expandedUser);\n    }\n  }, [expandedUser]);\n\n  const handleSaveLimit = async (userId: string, limitType: string) => {\n    try {\n      const data = await adminApiRequest(ADMIN_API_CONFIG.endpoints.adminUserLimitsUpdate, {\n        method: 'POST',\n        body: JSON.stringify({\n          user_id: userId,\n          limit_type: limitType,\n          limit_value: editLimitValue,\n        }),\n      });\n      if (data.success) {\n        showToast('success', 'Лимит обновлен');\n        await loadLimits(userId);\n        setEditingLimit(null);\n      } else {\n        showToast('error', data.message || 'Не удалось обновить лимит');\n      }\n    } catch (_error) {\n      showToast('error', 'Ошибка при обновлении лимита');\n    }\n  };\n\n  const handleClearHistory = async (userId: string, username: string) => {\n    if (!confirm(`Очистить всю историю пользователя ${username}?`)) return;\n\n    try {\n      const data = await adminApiRequest(ADMIN_API_CONFIG.endpoints.adminUserHistoryClear, {\n        method: 'POST',\n        body: JSON.stringify({ user_id: userId }),\n      });\n      if (data.success) {\n        showToast('success', 'История очищена');\n        await loadUsers();\n      } else {\n        showToast('error', data.message || 'Не удалось очистить историю');\n      }\n    } catch (_error) {\n      showToast('error', 'Ошибка при очистке истории');\n    }\n  };\n\n  const handleDeleteUser = async (userId: string, username: string) => {\n    if (!confirm(`УДАЛИТЬ ПОЛЬЗОВАТЕЛЯ ${username} ПОЛНОСТЬЮ?\\n\\nБудут удалены:\\n- Все чаты и сообщения\\n- Все лимиты\\n- Связи с компаниями\\n- Сам пользователь\\n\\nЭто действие необратимо!`)) return;\n\n    try {\n      const data = await adminApiRequest(ADMIN_API_CONFIG.endpoints.adminUserDelete, {\n        method: 'POST',\n        body: JSON.stringify({ user_id: userId }),\n      });\n      if (data.success) {\n        showToast('success', 'Пользователь удалён');\n        await loadUsers();\n      } else {\n        showToast('error', data.message || 'Не удалось удалить пользователя');\n      }\n    } catch (_error) {\n      showToast('error', 'Ошибка при удалении пользователя');\n    }\n  };\n\n  const handleSetLimits = async (userId: string, limitValue: number) => {\n    try {\n      const data = await adminApiRequest(ADMIN_API_CONFIG.endpoints.adminUserLimitsUpdate, {\n        method: 'POST',\n        body: JSON.stringify({\n          user_id: userId,\n          limit_type: 'daily_requests',\n          limit_value: limitValue,\n        }),\n      });\n      if (data.success) {\n        showToast('success', 'Лимиты обновлены');\n        setLimitsModalUser(null);\n        await loadUsers();\n        if (expandedUser) {\n          await loadLimits(expandedUser);\n        }\n      } else {\n        showToast('error', data.message || 'Не удалось обновить лимиты');\n      }\n    } catch (_error) {\n      showToast('error', 'Ошибка при обновлении лимитов');\n    }\n  };\n\n  const filteredUsers = users.filter((user) => {\n    if (!searchQuery) return true;\n    const query = searchQuery.toLowerCase();\n    return (\n      user.username?.toLowerCase().includes(query) ||\n      user.firstName?.toLowerCase().includes(query) ||\n      user.lastName?.toLowerCase().includes(query) ||\n      user.telegramId.toString().includes(query)\n    );\n  });\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">Пользователи</h2>\n          <p className=\"text-sm text-gray-500 dark:text-gray-400 mt-1\">Всего пользователей: {users.length}</p>\n        </div>\n      </div>\n\n      <div className=\"relative\">\n        <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n          <Search className=\"w-5 h-5 text-gray-400\" />\n        </div>\n        <input type=\"text\" value={searchQuery} onChange={(e) => setSearchQuery(e.target.value)} placeholder=\"Поиск по имени, username или Telegram ID...\" className=\"block w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\" />\n      </div>\n\n      <div className=\"space-y-4\">\n        {filteredUsers.length === 0 ? (\n          <div className=\"text-center py-12\">\n            <Users className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n            <p className=\"text-gray-500 dark:text-gray-400\">{searchQuery ? 'Пользователи не найдены' : 'Нет пользователей'}</p>\n          </div>\n        ) : (\n          filteredUsers.map((user) => {\n            const userLimits = limits.filter((l) => l.userId === user.id);\n            const primaryRole = user.companies[0]?.role || 'viewer';\n            return (\n              <motion.div key={user.id} initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className=\"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden\">\n                <div className=\"p-4 cursor-pointer hover:bg-gray-50 dark:hover:bg-slate-700 transition-colors\" onClick={() => setExpandedUser(expandedUser === user.id ? null : user.id)}>\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center space-x-3 flex-1\">\n                      <div className=\"w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-600 rounded-lg flex items-center justify-center flex-shrink-0\"><Users className=\"w-6 h-6 text-white\" /></div>\n                      <div className=\"flex-1 min-w-0\">\n                        <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">{user.firstName} {user.lastName} {user.username && `(@${user.username})`}</h3>\n                        <div className=\"flex items-center space-x-4 mt-1 text-sm text-gray-500 dark:text-gray-400\">\n                          <span>TG ID: {user.telegramId}</span>\n                          <span className={`px-2 py-0.5 rounded text-xs font-semibold ${primaryRole === 'owner' ? 'bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-300' : primaryRole === 'manager' ? 'bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-300' : 'bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-300'}`}>{primaryRole}</span>\n                          <span>{user.chatsCount} чатов</span>\n                          <span>{user.companies.length > 0 ? `${user.companies.length} компаний` : 'Нет компании'}</span>\n                        </div>\n                      </div>\n                    </div>\n                    <div className=\"flex items-center space-x-2\">\n                      <button onClick={(e) => { e.stopPropagation(); setLimitsModalUser(user); setNewLimitValue(userLimits.find(l => l.limitType === 'daily_requests')?.limitValue || 100); }} className=\"p-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors\" title=\"Задать лимиты\"><Sliders className=\"w-5 h-5\" /></button>\n                      <button onClick={(e) => { e.stopPropagation(); handleClearHistory(user.id, user.username || user.firstName || 'пользователя'); }} className=\"p-2 text-orange-600 hover:bg-orange-50 dark:hover:bg-orange-900/20 rounded-lg transition-colors\" title=\"Очистить историю\"><RefreshCw className=\"w-5 h-5\" /></button>\n                      <button onClick={(e) => { e.stopPropagation(); handleDeleteUser(user.id, user.username || user.firstName || 'пользователя'); }} className=\"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors\" title=\"Удалить пользователя\"><Trash2 className=\"w-5 h-5\" /></button>\n                      <Settings className=\"w-5 h-5 text-gray-400\" />\n                    </div>\n                  </div>\n                </div>\n\n                {expandedUser === user.id && (\n                  <motion.div initial={{ height: 0, opacity: 0 }} animate={{ height: 'auto', opacity: 1 }} exit={{ height: 0, opacity: 0 }} className=\"border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-slate-900/50\">\n                    <div className=\"p-4 space-y-4\">\n                      {user.companies.length > 0 && (<div><h4 className=\"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2\">Компании:</h4><div className=\"space-y-2\">{user.companies.map((company, idx) => (<div key={idx} className=\"flex items-center justify-between p-2 bg-white dark:bg-slate-800 rounded-lg\"><span className=\"text-sm text-gray-900 dark:text-white\">ID: {company.company_id}</span><span className={`px-2 py-0.5 rounded text-xs font-semibold ${company.role === 'owner' ? 'bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-300' : company.role === 'manager' ? 'bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-300' : 'bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-300'}`}>{company.role}</span></div>))}</div></div>)}\n                      <div><h4 className=\"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2\">Лимиты:</h4><div className=\"space-y-2\">{userLimits.length === 0 ? (<p className=\"text-sm text-gray-500 dark:text-gray-400\">Нет установленных лимитов</p>) : (userLimits.map((limit) => (<div key={limit.id} className=\"flex items-center justify-between p-2 bg-white dark:bg-slate-800 rounded-lg\"><div className=\"flex-1\"><span className=\"text-sm text-gray-900 dark:text-white\">{limit.limitType}</span>{editingLimit === limit.id ? (<div className=\"flex items-center space-x-2 mt-1\"><input type=\"number\" value={editLimitValue} onChange={(e) => setEditLimitValue(parseInt(e.target.value) || 0)} className=\"w-24 px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-slate-700 text-gray-900 dark:text-white\" /><button onClick={(e) => { e.stopPropagation(); handleSaveLimit(user.id, limit.limitType); }} className=\"p-1 text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20 rounded\"><Save className=\"w-4 h-4\" /></button><button onClick={(e) => { e.stopPropagation(); setEditingLimit(null); setEditLimitValue(0); }} className=\"p-1 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded\"><X className=\"w-4 h-4\" /></button></div>) : (<div className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">Использовано: {limit.currentUsage} / {limit.limitValue}</div>)}</div>{editingLimit !== limit.id && (<button onClick={(e) => { e.stopPropagation(); setEditingLimit(limit.id); setEditLimitValue(limit.limitValue); }} className=\"p-1 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded\"><Edit className=\"w-4 h-4\" /></button>)}</div>)))}</div></div>\n                    </div>\n                  </motion.div>\n                )}\n              </motion.div>\n            );\n          })\n        )}\n      </div>\n\n      {/* Limits Modal */}\n      {limitsModalUser && (\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50\" onClick={() => setLimitsModalUser(null)}>\n          <motion.div initial={{ scale: 0.9, opacity: 0 }} animate={{ scale: 1, opacity: 1 }} className=\"bg-white dark:bg-slate-800 rounded-xl shadow-2xl p-6 max-w-md w-full mx-4\" onClick={(e) => e.stopPropagation()}>\n            <h3 className=\"text-xl font-bold text-gray-900 dark:text-white mb-4\">Управление лимитами</h3>\n            <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-4\">Пользователь: {limitsModalUser.firstName} {limitsModalUser.lastName} (@{limitsModalUser.username})</p>\n            <div className=\"mb-4\">\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">Дневной лимит запросов</label>\n              <input type=\"number\" value={newLimitValue} onChange={(e) => setNewLimitValue(parseInt(e.target.value) || 0)} className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500\" min=\"0\" />\n              <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">Текущее использование: {limits.find(l => l.userId === limitsModalUser.id && l.limitType === 'daily_requests')?.currentUsage || 0} / {limits.find(l => l.userId === limitsModalUser.id && l.limitType === 'daily_requests')?.limitValue || 0}</p>\n            </div>\n            <div className=\"flex space-x-3\">\n              <button onClick={() => setLimitsModalUser(null)} className=\"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-slate-700 transition-colors\">Отмена</button>\n              <button onClick={() => handleSetLimits(limitsModalUser.id, newLimitValue)} className=\"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\">Сохранить</button>\n            </div>\n          </motion.div>\n        </div>\n      )}\n    </div>\n  );\n};\n\n","import React, { useState, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport { BarChart3, Users, Building2, MessageSquare, TrendingUp, Activity } from 'lucide-react';\nimport { useToast } from '../components/Toast';\nimport { adminApiRequest, ADMIN_API_CONFIG } from '../config/api';\n\ninterface PlatformStats {\n  totalUsers: number;\n  activeUsers30d: number;\n  activeUsers7d: number;\n  totalCompanies: number;\n  totalChats: number;\n  totalMessages: number;\n  newUsers30d: number;\n  newCompanies30d: number;\n  activeSessions: number;\n}\n\nexport const AnalyticsTab: React.FC = () => {\n  const [stats, setStats] = useState<PlatformStats | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const { showToast } = useToast();\n\n  const loadStats = async () => {\n    setIsLoading(true);\n    try {\n      const data = await adminApiRequest<PlatformStats>(ADMIN_API_CONFIG.endpoints.adminStatsPlatform);\n      if (data.success && data.data) {\n        setStats(data.data);\n      } else {\n        const errorMsg = data.message || 'Ошибка сервера: не удалось загрузить статистику';\n        showToast('error', errorMsg);\n      }\n    } catch (error: any) {\n      showToast('error', error?.message || 'Ошибка при загрузке статистики');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    loadStats();\n  }, []);\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500\"></div>\n      </div>\n    );\n  }\n\n  if (!stats) {\n    return (\n      <div className=\"text-center py-12\">\n        <BarChart3 className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n        <p className=\"text-gray-500 dark:text-gray-400\">Нет данных</p>\n      </div>\n    );\n  }\n\n  const statCards = [\n    {\n      title: 'Всего пользователей',\n      value: stats.totalUsers,\n      icon: Users,\n      color: 'blue',\n      change: stats.newUsers30d,\n      changeLabel: 'новых за 30 дней',\n    },\n    {\n      title: 'Активных (30 дней)',\n      value: stats.activeUsers30d,\n      icon: Activity,\n      color: 'green',\n      change: stats.activeUsers7d,\n      changeLabel: 'активных за 7 дней',\n    },\n    {\n      title: 'Всего компаний',\n      value: stats.totalCompanies,\n      icon: Building2,\n      color: 'purple',\n      change: stats.newCompanies30d,\n      changeLabel: 'новых за 30 дней',\n    },\n    {\n      title: 'Всего чатов',\n      value: stats.totalChats,\n      icon: MessageSquare,\n      color: 'indigo',\n    },\n    {\n      title: 'Всего сообщений',\n      value: stats.totalMessages,\n      icon: MessageSquare,\n      color: 'pink',\n    },\n    {\n      title: 'Активных сессий',\n      value: stats.activeSessions,\n      icon: TrendingUp,\n      color: 'orange',\n    },\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">Аналитика платформы</h2>\n          <p className=\"text-sm text-gray-500 dark:text-gray-400 mt-1\">\n            Статистика использования Lumon Platform\n          </p>\n        </div>\n        <button\n          onClick={loadStats}\n          className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n        >\n          Обновить\n        </button>\n      </div>\n\n      {/* Stats Grid */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n        {statCards.map((stat, index) => {\n          const Icon = stat.icon;\n          const colorClasses = {\n            blue: 'bg-blue-500',\n            green: 'bg-green-500',\n            purple: 'bg-purple-500',\n            indigo: 'bg-indigo-500',\n            pink: 'bg-pink-500',\n            orange: 'bg-orange-500',\n          };\n\n          return (\n            <motion.div\n              key={index}\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: index * 0.1 }}\n              className=\"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6\"\n            >\n              <div className=\"flex items-center justify-between mb-4\">\n                <div className={`w-12 h-12 ${colorClasses[stat.color as keyof typeof colorClasses]} rounded-lg flex items-center justify-center`}>\n                  <Icon className=\"w-6 h-6 text-white\" />\n                </div>\n              </div>\n              <h3 className=\"text-sm font-medium text-gray-500 dark:text-gray-400 mb-2\">{stat.title}</h3>\n              <div className=\"text-3xl font-bold text-gray-900 dark:text-white mb-2\">{stat.value.toLocaleString('ru-RU')}</div>\n              {stat.change !== undefined && (\n                <div className=\"text-xs text-gray-500 dark:text-gray-400\">\n                  {stat.change > 0 && '+'}\n                  {stat.change} {stat.changeLabel}\n                </div>\n              )}\n            </motion.div>\n          );\n        })}\n      </div>\n\n      {/* Charts Placeholder */}\n      <div className=\"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6\">\n        <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">Графики использования</h3>\n        <div className=\"text-center py-12 text-gray-500 dark:text-gray-400\">\n          <BarChart3 className=\"w-12 h-12 mx-auto mb-2 opacity-50\" />\n          <p>Графики будут добавлены в следующей версии</p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n","import React, { useState, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport { FlaskConical, Plus, ToggleLeft, ToggleRight } from 'lucide-react';\nimport { useToast } from '../components/Toast';\nimport { adminApiRequest, ADMIN_API_CONFIG } from '../config/api';\n\ninterface Experiment {\n  id: string;\n  name: string;\n  description: string | null;\n  featureName: string;\n  enabled: boolean;\n  trafficPercentage: number;\n  variantAConfig: any;\n  variantBConfig: any;\n  createdAt: string;\n  updatedAt: string;\n  variantAUsers: number;\n  variantBUsers: number;\n}\n\nexport const ABTestingTab: React.FC = () => {\n  const [experiments, setExperiments] = useState<Experiment[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [_showCreateModal, _setShowCreateModal] = useState(false);\n  const [_editingId, _setEditingId] = useState<string | null>(null);\n  const { showToast } = useToast();\n\n  const loadExperiments = async () => {\n    setIsLoading(true);\n    try {\n      const data = await adminApiRequest<Experiment[]>(ADMIN_API_CONFIG.endpoints.adminAbExperimentsList);\n      if (data.success && data.data) {\n        setExperiments(data.data);\n      } else {\n        const errorMsg = data.message || 'Ошибка сервера: не удалось загрузить эксперименты';\n        showToast('error', errorMsg);\n      }\n    } catch (error: any) {\n      showToast('error', error?.message || 'Ошибка при загрузке экспериментов');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    loadExperiments();\n  }, []);\n\n  const handleToggleEnabled = async (id: string, enabled: boolean) => {\n    try {\n      const data = await adminApiRequest(ADMIN_API_CONFIG.endpoints.adminAbExperimentUpdate, {\n        method: 'POST',\n        body: JSON.stringify({ id, enabled: !enabled }),\n      });\n      if (data.success) {\n        showToast('success', enabled ? 'Эксперимент отключен' : 'Эксперимент включен');\n        await loadExperiments();\n      } else {\n        showToast('error', data.message || 'Не удалось обновить эксперимент');\n      }\n    } catch (_error) {\n      showToast('error', 'Ошибка при обновлении эксперимента');\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">A/B Тестирование</h2>\n          <p className=\"text-sm text-gray-500 dark:text-gray-400 mt-1\">\n            Управление экспериментами\n          </p>\n        </div>\n        <button\n          onClick={() => _setShowCreateModal(true)}\n          className=\"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n        >\n          <Plus className=\"w-4 h-4\" />\n          <span>Создать эксперимент</span>\n        </button>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n        {experiments.length === 0 ? (\n          <div className=\"col-span-2 text-center py-12\">\n            <FlaskConical className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n            <p className=\"text-gray-500 dark:text-gray-400\">Нет экспериментов</p>\n          </div>\n        ) : (\n          experiments.map((exp) => (\n            <motion.div\n              key={exp.id}\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              className=\"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6\"\n            >\n              <div className=\"flex items-start justify-between mb-4\">\n                <div className=\"flex-1\">\n                  <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">{exp.name}</h3>\n                  {exp.description && (\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400 mt-1\">{exp.description}</p>\n                  )}\n                </div>\n                <button\n                  onClick={() => handleToggleEnabled(exp.id, exp.enabled)}\n                  className=\"ml-2\"\n                >\n                  {exp.enabled ? (\n                    <ToggleRight className=\"w-6 h-6 text-green-500\" />\n                  ) : (\n                    <ToggleLeft className=\"w-6 h-6 text-gray-400\" />\n                  )}\n                </button>\n              </div>\n              <div className=\"space-y-2 text-sm\">\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-gray-500 dark:text-gray-400\">Функция:</span>\n                  <span className=\"text-gray-900 dark:text-white font-medium\">{exp.featureName}</span>\n                </div>\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-gray-500 dark:text-gray-400\">Трафик:</span>\n                  <span className=\"text-gray-900 dark:text-white font-medium\">{exp.trafficPercentage}%</span>\n                </div>\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-gray-500 dark:text-gray-400\">Вариант A:</span>\n                  <span className=\"text-gray-900 dark:text-white font-medium\">{exp.variantAUsers} пользователей</span>\n                </div>\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-gray-500 dark:text-gray-400\">Вариант B:</span>\n                  <span className=\"text-gray-900 dark:text-white font-medium\">{exp.variantBUsers} пользователей</span>\n                </div>\n              </div>\n            </motion.div>\n          ))\n        )}\n      </div>\n    </div>\n  );\n};\n\n","import React, { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Building2, FileText, Database, LogOut, Shield, HardDrive, Activity, FileSearch, Users, BarChart3, FlaskConical, Menu, X } from 'lucide-react';\nimport { AdminLogin } from './components/AdminLogin';\nimport { ToastProvider } from './components/Toast';\nimport { CompaniesTab } from './tabs/CompaniesTab';\nimport { LegalDocsTab } from './tabs/LegalDocsTab';\nimport { AIDocumentsTab } from './tabs/AIDocumentsTab';\nimport { BackupsTab } from './tabs/BackupsTab';\nimport { HealthChecksTab } from './tabs/HealthChecksTab';\nimport { LogsTab } from './tabs/LogsTab';\nimport { UsersTab } from './tabs/UsersTab';\nimport { AnalyticsTab } from './tabs/AnalyticsTab';\nimport { ABTestingTab } from './tabs/ABTestingTab';\n\nconst AdminPage: React.FC = () => {\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [activeTab, setActiveTab] = useState<'companies' | 'legal' | 'ai-docs' | 'backups' | 'health' | 'logs' | 'users' | 'analytics' | 'ab-testing'>('companies');\n  const [sidebarOpen, setSidebarOpen] = useState(true);\n\n  // Проверка авторизации при загрузке\n  useEffect(() => {\n    const adminToken = localStorage.getItem('admin_token');\n    if (adminToken) {\n      setIsAuthenticated(true);\n    }\n  }, []);\n\n  const handleLogin = (token: string) => {\n    localStorage.setItem('admin_token', token);\n    setIsAuthenticated(true);\n  };\n\n  const handleLogout = () => {\n    localStorage.removeItem('admin_token');\n    setIsAuthenticated(false);\n  };\n\n  // Определение и применение системной темы\n  useEffect(() => {\n    const applySystemTheme = () => {\n      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;\n      if (prefersDark) {\n        document.documentElement.classList.add('dark');\n      } else {\n        document.documentElement.classList.remove('dark');\n      }\n    };\n\n    // Применяем тему при загрузке\n    applySystemTheme();\n\n    // Отслеживаем изменения системной темы\n    const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');\n    const handleThemeChange = (e: MediaQueryListEvent) => {\n      if (e.matches) {\n        document.documentElement.classList.add('dark');\n      } else {\n        document.documentElement.classList.remove('dark');\n      }\n    };\n\n    // Современный способ подписки на изменения\n    if (mediaQuery.addEventListener) {\n      mediaQuery.addEventListener('change', handleThemeChange);\n      return () => {\n        mediaQuery.removeEventListener('change', handleThemeChange);\n      };\n    } else {\n      // Fallback для старых браузеров\n      mediaQuery.addListener(handleThemeChange);\n      return () => {\n        mediaQuery.removeListener(handleThemeChange);\n      };\n    }\n  }, []);\n\n  // Фиксируем страницу\n  useEffect(() => {\n    document.body.style.overflow = 'hidden';\n    document.documentElement.style.overflow = 'hidden';\n    \n    return () => {\n      document.body.style.overflow = '';\n      document.documentElement.style.overflow = '';\n    };\n  }, []);\n\n  if (!isAuthenticated) {\n    return <AdminLogin onLogin={handleLogin} />;\n  }\n\n  const tabs = [\n    { id: 'companies' as const, label: 'Компании', icon: Building2 },\n    { id: 'legal' as const, label: 'Юр документы', icon: FileText },\n    { id: 'ai-docs' as const, label: 'Документы для ИИ', icon: Database },\n    { id: 'backups' as const, label: 'Бэкапы', icon: HardDrive },\n    { id: 'health' as const, label: 'Health Checks', icon: Activity },\n    { id: 'logs' as const, label: 'Логи', icon: FileSearch },\n    { id: 'users' as const, label: 'Пользователи', icon: Users },\n    { id: 'analytics' as const, label: 'Аналитика', icon: BarChart3 },\n    { id: 'ab-testing' as const, label: 'A/B Тесты', icon: FlaskConical },\n  ];\n\n  return (\n    <ToastProvider>\n      <div className=\"min-h-screen bg-white dark:bg-slate-950 fixed inset-0 overflow-hidden flex\">\n        {/* Sidebar */}\n        <motion.aside\n          initial={false}\n          animate={{ width: sidebarOpen ? '256px' : '64px' }}\n          className=\"bg-white dark:bg-slate-900 border-r border-gray-200 dark:border-slate-800 flex flex-col h-full transition-all duration-200\"\n        >\n          {/* Sidebar Header */}\n          <div className=\"h-16 border-b border-gray-200 dark:border-slate-800 flex items-center justify-between px-4\">\n            {sidebarOpen && (\n              <motion.div\n                initial={{ opacity: 0 }}\n                animate={{ opacity: 1 }}\n                className=\"flex items-center space-x-3\"\n              >\n                <div className=\"w-8 h-8 bg-slate-900 dark:bg-white rounded-lg flex items-center justify-center\">\n                  <Shield className=\"w-5 h-5 text-white dark:text-slate-900\" />\n                </div>\n                <div>\n                  <h1 className=\"text-sm font-semibold text-gray-900 dark:text-white\">Админ-панель</h1>\n                  <p className=\"text-xs text-gray-500 dark:text-gray-400\">Lumon</p>\n                </div>\n              </motion.div>\n            )}\n            {!sidebarOpen && (\n              <div className=\"w-8 h-8 bg-slate-900 dark:bg-white rounded-lg flex items-center justify-center mx-auto\">\n                <Shield className=\"w-5 h-5 text-white dark:text-slate-900\" />\n              </div>\n            )}\n            <button\n              onClick={() => setSidebarOpen(!sidebarOpen)}\n              className=\"p-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-slate-800 text-gray-600 dark:text-gray-400 transition-colors\"\n            >\n              {sidebarOpen ? <X className=\"w-4 h-4\" /> : <Menu className=\"w-4 h-4\" />}\n            </button>\n          </div>\n\n          {/* Navigation */}\n          <nav className=\"flex-1 overflow-y-auto py-4 px-2 scrollbar-thin\">\n            {tabs.map((tab) => {\n              const Icon = tab.icon;\n              const isActive = activeTab === tab.id;\n              return (\n                <motion.button\n                  key={tab.id}\n                  onClick={() => setActiveTab(tab.id)}\n                  className={`\n                    w-full flex items-center space-x-3 px-3 py-2.5 rounded-lg mb-1 transition-all duration-150\n                    ${isActive\n                      ? 'bg-slate-100 dark:bg-slate-800 text-slate-900 dark:text-white'\n                      : 'text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-slate-800/50 hover:text-gray-900 dark:hover:text-white'\n                    }\n                  `}\n                  whileHover={{ x: 2 }}\n                  whileTap={{ scale: 0.98 }}\n                >\n                  <Icon className={`w-5 h-5 flex-shrink-0 ${isActive ? 'text-slate-900 dark:text-white' : ''}`} />\n                  {sidebarOpen && (\n                    <motion.span\n                      initial={{ opacity: 0 }}\n                      animate={{ opacity: 1 }}\n                      className=\"text-sm font-medium whitespace-nowrap\"\n                    >\n                      {tab.label}\n                    </motion.span>\n                  )}\n                </motion.button>\n              );\n            })}\n          </nav>\n\n          {/* Sidebar Footer */}\n          <div className=\"border-t border-gray-200 dark:border-slate-800 p-4\">\n            <motion.button\n              onClick={handleLogout}\n              className=\"w-full flex items-center space-x-3 px-3 py-2.5 rounded-lg text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-slate-800/50 hover:text-gray-900 dark:hover:text-white transition-all duration-150\"\n              whileHover={{ x: 2 }}\n              whileTap={{ scale: 0.98 }}\n            >\n              <LogOut className=\"w-5 h-5 flex-shrink-0\" />\n              {sidebarOpen && (\n                <motion.span\n                  initial={{ opacity: 0 }}\n                  animate={{ opacity: 1 }}\n                  className=\"text-sm font-medium\"\n                >\n                  Выйти\n                </motion.span>\n              )}\n            </motion.button>\n          </div>\n        </motion.aside>\n\n        {/* Main Content */}\n        <div className=\"flex-1 flex flex-col overflow-hidden\">\n          {/* Top Bar */}\n          <div className=\"h-16 border-b border-gray-200 dark:border-slate-800 bg-white dark:bg-slate-900 flex items-center px-6\">\n            <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n              {tabs.find(t => t.id === activeTab)?.label}\n            </h2>\n          </div>\n\n          {/* Content Area */}\n          <div className=\"flex-1 overflow-y-auto bg-gray-50 dark:bg-slate-950 scrollbar-thin\">\n            <div className=\"p-6\">\n              <AnimatePresence mode=\"wait\">\n                {activeTab === 'companies' && (\n                  <motion.div\n                    key=\"companies\"\n                    initial={{ opacity: 0 }}\n                    animate={{ opacity: 1 }}\n                    exit={{ opacity: 0 }}\n                    transition={{ duration: 0.2 }}\n                  >\n                    <CompaniesTab />\n                  </motion.div>\n                )}\n                {activeTab === 'legal' && (\n                  <motion.div\n                    key=\"legal\"\n                    initial={{ opacity: 0 }}\n                    animate={{ opacity: 1 }}\n                    exit={{ opacity: 0 }}\n                    transition={{ duration: 0.2 }}\n                  >\n                    <LegalDocsTab />\n                  </motion.div>\n                )}\n                {activeTab === 'ai-docs' && (\n                  <motion.div\n                    key=\"ai-docs\"\n                    initial={{ opacity: 0 }}\n                    animate={{ opacity: 1 }}\n                    exit={{ opacity: 0 }}\n                    transition={{ duration: 0.2 }}\n                  >\n                    <AIDocumentsTab />\n                  </motion.div>\n                )}\n                {activeTab === 'backups' && (\n                  <motion.div\n                    key=\"backups\"\n                    initial={{ opacity: 0 }}\n                    animate={{ opacity: 1 }}\n                    exit={{ opacity: 0 }}\n                    transition={{ duration: 0.2 }}\n                  >\n                    <BackupsTab />\n                  </motion.div>\n                )}\n                {activeTab === 'health' && (\n                  <motion.div\n                    key=\"health\"\n                    initial={{ opacity: 0 }}\n                    animate={{ opacity: 1 }}\n                    exit={{ opacity: 0 }}\n                    transition={{ duration: 0.2 }}\n                  >\n                    <HealthChecksTab />\n                  </motion.div>\n                )}\n                {activeTab === 'logs' && (\n                  <motion.div\n                    key=\"logs\"\n                    initial={{ opacity: 0 }}\n                    animate={{ opacity: 1 }}\n                    exit={{ opacity: 0 }}\n                    transition={{ duration: 0.2 }}\n                  >\n                    <LogsTab />\n                  </motion.div>\n                )}\n                {activeTab === 'users' && (\n                  <motion.div\n                    key=\"users\"\n                    initial={{ opacity: 0 }}\n                    animate={{ opacity: 1 }}\n                    exit={{ opacity: 0 }}\n                    transition={{ duration: 0.2 }}\n                  >\n                    <UsersTab />\n                  </motion.div>\n                )}\n                {activeTab === 'analytics' && (\n                  <motion.div\n                    key=\"analytics\"\n                    initial={{ opacity: 0 }}\n                    animate={{ opacity: 1 }}\n                    exit={{ opacity: 0 }}\n                    transition={{ duration: 0.2 }}\n                  >\n                    <AnalyticsTab />\n                  </motion.div>\n                )}\n                {activeTab === 'ab-testing' && (\n                  <motion.div\n                    key=\"ab-testing\"\n                    initial={{ opacity: 0 }}\n                    animate={{ opacity: 1 }}\n                    exit={{ opacity: 0 }}\n                    transition={{ duration: 0.2 }}\n                  >\n                    <ABTestingTab />\n                  </motion.div>\n                )}\n              </AnimatePresence>\n            </div>\n          </div>\n        </div>\n      </div>\n    </ToastProvider>\n  );\n};\n\nexport default AdminPage;\n\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport AdminPage from './AdminPage';\nimport '../src/index.css';\n\n// Применяем системную тему сразу при загрузке\nconst applySystemTheme = () => {\n  const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;\n  if (prefersDark) {\n    document.documentElement.classList.add('dark');\n  } else {\n    document.documentElement.classList.remove('dark');\n  }\n};\n\n// Применяем тему до рендера\napplySystemTheme();\n\nReactDOM.createRoot(document.getElementById('root')!).render(\n  <React.StrictMode>\n    <AdminPage />\n  </React.StrictMode>\n);\n\n"],"names":["m","require$$0","client","ADMIN_API_CONFIG","getAdminApiUrl","endpoint","getAdminHeaders","headers","token","adminApiRequest","options","url","response","responseText","contentType","data","error","AdminLogin","onLogin","username","setUsername","useState","password","setPassword","setError","isLoading","setIsLoading","handleSubmit","e","errorData","jsx","jsxs","motion","Shield","Lock","AlertCircle","ToastContext","createContext","useToast","context","useContext","ToastProvider","children","toasts","setToasts","showToast","useCallback","type","message","duration","id","toast","prev","removeToast","t","getIcon","CheckCircle","XCircle","Info","getColors","AnimatePresence","X","CompaniesTab","companies","setCompanies","searchQuery","setSearchQuery","expandedCompany","setExpandedCompany","loadCompanies","errorMsg","useEffect","filteredCompanies","company","getRoleBadge","role","colors","RefreshCw","Search","Building2","Users","ChevronUp","ChevronDown","user","LegalDocsTab","docs","setDocs","editingId","setEditingId","editContent","setEditContent","loadDocs","handleEdit","doc","handleSave","handleCancel","FileText","Edit","Save","AIDocumentsTab","documents","setDocuments","isUploading","setIsUploading","fileInputRef","useRef","loadDocuments","handleUpload","files","maxSize","allowedTypes","invalidFiles","file","ext","resolve","handleDelete","formatFileSize","bytes","k","sizes","i","getStatusBadge","status","styles","Upload","Database","Trash2","BackupsTab","backups","setBackups","isCreating","setIsCreating","loadBackups","handleCreateBackup","handleRestore","backupId","filePath","formatDate","dateString","Fragment","Download","HardDrive","backup","Clock","HealthChecksTab","systemStatus","setSystemStatus","healthChecks","setHealthChecks","_isLoading","_setIsLoading","isChecking","setIsChecking","loadHealthChecks","handleCheckAll","handleCheckService","serviceName","metricsHistory","systemChecks","check","a","b","renderChart","color","label","maxValue","d","chartHeight","TrendingUp","x","y","getStatusIcon","getStatusColor","services","Server","Cpu","MemoryStick","service","serviceStatus","latestCheck","LogsTab","logs","setLogs","filterAction","setFilterAction","currentPage","setCurrentPage","total","setTotal","limit","loadLogs","params","filteredLogs","log","query","uniqueActions","handleExport","csv","blob","Filter","action","p","UsersTab","users","setUsers","limits","setLimits","expandedUser","setExpandedUser","editingLimit","setEditingLimit","editLimitValue","setEditLimitValue","limitsModalUser","setLimitsModalUser","newLimitValue","setNewLimitValue","loadUsers","loadLimits","userId","handleSaveLimit","limitType","handleClearHistory","handleDeleteUser","handleSetLimits","limitValue","filteredUsers","userLimits","l","primaryRole","Sliders","Settings","idx","AnalyticsTab","stats","setStats","loadStats","BarChart3","statCards","Activity","MessageSquare","stat","index","Icon","colorClasses","ABTestingTab","experiments","setExperiments","_showCreateModal","_setShowCreateModal","loadExperiments","handleToggleEnabled","enabled","Plus","FlaskConical","exp","ToggleRight","ToggleLeft","AdminPage","isAuthenticated","setIsAuthenticated","activeTab","setActiveTab","sidebarOpen","setSidebarOpen","handleLogin","handleLogout","mediaQuery","handleThemeChange","tabs","FileSearch","Menu","tab","isActive","LogOut","applySystemTheme","ReactDOM","React"],"mappings":"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","x_google_ignoreList":[0]}