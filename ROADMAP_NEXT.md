# üöÄ –ü–ª–∞–Ω –¥–∞–ª—å–Ω–µ–π—à–∏—Ö —É–ª—É—á—à–µ–Ω–∏–π Lumon Platform

> **–°—Ç–∞—Ç—É—Å:** Auth —Å–∏—Å—Ç–µ–º–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ ‚úÖ | –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ —Ä–∞–∑–≤–∏—Ç–∏—è  
> **–î–∞—Ç–∞:** 4 –Ω–æ—è–±—Ä—è 2025

---

## üìä –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

‚úÖ **–ó–∞–≤–µ—Ä—à–µ–Ω–æ:**
- Auth —Å–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ (6 workflows)
- Frontend –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞
- Chat API —Ä–∞–±–æ—Ç–∞–µ—Ç (3 workflows)
- Cron jobs –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- –û–Ω–±–æ—Ä–¥–∏–Ω–≥ –∏ —Ä–æ–ª–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã

‚è∏Ô∏è **–û—Ç–ª–æ–∂–µ–Ω–æ:**
- RBAC UI –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–ª—è viewer
- –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å
- Rate Limiting
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## üéØ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: UI/UX —É–ª—É—á—à–µ–Ω–∏—è (1-2 –Ω–µ–¥–µ–ª–∏)

### 1.1. RBAC UI –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–ª—è viewer

**–¶–µ–ª—å:** –ë–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –¥–µ–π—Å—Ç–≤–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å —Ä–æ–ª—å—é `viewer`

**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å —Ö—É–∫ `useUserRole()` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–æ–ª–∏ –∏–∑ context
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `VoiceAssistantPage.tsx`:
  - –ë–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ —á–∞—Ç–∞ (–∫–Ω–æ–ø–∫–∞ –Ω–µ–∞–∫—Ç–∏–≤–Ω–∞)
  - –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å badge "üëÅÔ∏è –¢–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä"
  - –û—Ç–∫–ª—é—á–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É —Ñ–∞–π–ª–æ–≤
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `KnowledgeBasePage.tsx`:
  - –°–∫—Ä—ã—Ç—å –∫–Ω–æ–ø–∫—É –∑–∞–≥—Ä—É–∑–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
  - –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å badge "–¢–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä"
- [ ] –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `RoleBadge.tsx`:
  ```tsx
  - üëë Owner (—Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π)
  - üîß Manager (—Å–∏–Ω–∏–π)
  - üëÅÔ∏è Viewer (—Å–µ—Ä—ã–π)
  ```
- [ ] –°–æ–∑–¥–∞—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ `ViewerRestrictionsModal.tsx`:
  - –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –¥–ª—è viewer
  - –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –∫–æ–º–ø–∞–Ω–∏—é

**–§–∞–π–ª—ã:**
- `src/hooks/useUserRole.ts` (–Ω–æ–≤—ã–π)
- `src/components/RoleBadge.tsx` (–Ω–æ–≤—ã–π)
- `src/components/modals/ViewerRestrictionsModal.tsx` (–Ω–æ–≤—ã–π)
- `front/VoiceAssistantPage.tsx` (–æ–±–Ω–æ–≤–∏—Ç—å)
- `front/KnowledgeBasePage.tsx` (–æ–±–Ω–æ–≤–∏—Ç—å)

**–û—Ü–µ–Ω–∫–∞:** 3-4 –¥–Ω—è

---

### 1.2. –°–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤

**–¶–µ–ª—å:** –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ —Å–ø–∏—Å–∫–æ–º –≤—Å–µ—Ö —á–∞—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å workflow `/webhook/chat.list`:
  - Auth.validate
  - SELECT chats WHERE user_id = context.userId OR company_id = context.companyId
  - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∞–∫—Ç–∏–≤–Ω–æ–π –∫–æ–º–ø–∞–Ω–∏–∏
  - –í–æ–∑–≤—Ä–∞—Ç —Å–ø–∏—Å–∫–∞ —á–∞—Ç–æ–≤ —Å –ø–æ—Å–ª–µ–¥–Ω–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º
- [ ] –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É `ChatListPage.tsx`:
  - –°–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤ —Å –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏
  - –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é —á–∞—Ç–∞
  - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∫–æ–º–ø–∞–Ω–∏–∏ (–¥–ª—è multi-company)
  - –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ (–ø–æ –¥–∞—Ç–µ —Å–æ–∑–¥–∞–Ω–∏—è/–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è)
  - –ö–Ω–æ–ø–∫–∞ "–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —á–∞—Ç"
  - –£–¥–∞–ª–µ–Ω–∏–µ —á–∞—Ç–æ–≤ (–¥–ª—è owner/manager)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –Ω–∞–≤–∏–≥–∞—Ü–∏—é:
  - –ò–∑ MenuPage ‚Üí ChatListPage
  - –ò–∑ ChatListPage ‚Üí VoiceAssistantPage (–≤—ã–±—Ä–∞–Ω–Ω—ã–π —á–∞—Ç)
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `VoiceAssistantPage.tsx`:
  - –ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É —á–∞—Ç–æ–≤"
  - –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —á–∞—Ç–∞–º–∏

**–§–∞–π–ª—ã:**
- `back/n8n/workflows/chat.list.json` (–Ω–æ–≤—ã–π)
- `front/ChatListPage.tsx` (–Ω–æ–≤—ã–π)
- `src/utils/api.ts` (–¥–æ–±–∞–≤–∏—Ç—å `getChatList()`)
- `src/App.tsx` (–¥–æ–±–∞–≤–∏—Ç—å —Ä–æ—É—Ç)

**–û—Ü–µ–Ω–∫–∞:** 4-5 –¥–Ω–µ–π

---

## üõ°Ô∏è –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å (1 –Ω–µ–¥–µ–ª—è)

### 2.1. –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å

**–¶–µ–ª—å:** –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤

**–ó–∞–¥–∞—á–∏:**
- [ ] –û–±–Ω–æ–≤–∏—Ç—å workflow `chat.save-message`:
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ `Idempotency-Key` –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ
  - SELECT –∏–∑ `idempotency_keys` –ø–æ –∫–ª—é—á—É
  - –ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω ‚Üí –≤–µ—Ä–Ω—É—Ç—å —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç
  - –ï—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω ‚Üí –≤—ã–ø–æ–ª–Ω–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é
  - INSERT –≤ `idempotency_keys` –ø–æ—Å–ª–µ —É—Å–ø–µ—Ö–∞
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `src/config/api.ts`:
  - `getIdempotentHeaders()` —É–∂–µ –µ—Å—Ç—å ‚úÖ
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `src/utils/api.ts`:
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `getIdempotentHeaders()` –¥–ª—è `saveMessage()`

**–§–∞–π–ª—ã:**
- `back/n8n/workflows/chat.save-message.json` (–æ–±–Ω–æ–≤–∏—Ç—å)
- `src/utils/api.ts` (–æ–±–Ω–æ–≤–∏—Ç—å)

**–û—Ü–µ–Ω–∫–∞:** 2-3 –¥–Ω—è

---

### 2.2. Rate Limiting

**–¶–µ–ª—å:** –ó–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–∞–º–∞ –∏ DDoS

**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å subworkflow `rate-limit.check`:
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–∞ –ø–æ user_id + endpoint + minute_bucket
  - INSERT/UPDATE –≤ `rate_limits`
  - –í–æ–∑–≤—Ä–∞—Ç `{ allowed: true/false, count, limit }`
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –≤ –º—É—Ç–∏—Ä—É—é—â–∏–µ endpoints:
  - `chat.create` (30 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω—É—Ç—É)
  - `chat.save-message` (30 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω—É—Ç—É)
  - `analytics.log-event` (100 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω—É—Ç—É)
- [ ] –í–æ–∑–≤—Ä–∞—Ç 429 –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞:
  ```json
  {
    "error": "rate_limit_exceeded",
    "status": 429,
    "message": "Too many requests. Limit: 30/minute",
    "retryAfter": 60
  }
  ```

**–§–∞–π–ª—ã:**
- `back/n8n/workflows/rate-limit.check.json` (–Ω–æ–≤—ã–π)
- `back/n8n/workflows/chat.create.json` (–æ–±–Ω–æ–≤–∏—Ç—å)
- `back/n8n/workflows/chat.save-message.json` (–æ–±–Ω–æ–≤–∏—Ç—å)

**–û—Ü–µ–Ω–∫–∞:** 2-3 –¥–Ω—è

---

## üöÄ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: –ù–æ–≤—ã–µ —Ñ–∏—á–∏ (2-3 –Ω–µ–¥–µ–ª–∏)

### 3.1. –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π

**–¶–µ–ª—å:** –ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –∫–æ–º–ø–∞–Ω–∏—é

**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É `invitations`:
  ```sql
  CREATE TABLE invitations (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    company_id UUID REFERENCES companies(id),
    invited_by UUID REFERENCES users(id),
    email TEXT,
    telegram_id BIGINT,
    role TEXT CHECK (role IN ('manager', 'viewer')),
    token UUID UNIQUE NOT NULL,
    status TEXT CHECK (status IN ('pending', 'accepted', 'expired')),
    expires_at TIMESTAMPTZ,
    created_at TIMESTAMPTZ DEFAULT now()
  );
  ```
- [ ] –°–æ–∑–¥–∞—Ç—å workflow `/webhook/invite-user`:
  - Auth.validate (—Ç–æ–ª—å–∫–æ owner/manager)
  - –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
  - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞
  - –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (Telegram/Email)
- [ ] –°–æ–∑–¥–∞—Ç—å workflow `/webhook/accept-invite`:
  - –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è
  - –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –≤ `user_companies`
  - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
- [ ] –°–æ–∑–¥–∞—Ç—å UI:
  - –°—Ç—Ä–∞–Ω–∏—Ü–∞ `InvitePage.tsx` (–¥–ª—è owner/manager)
  - –§–æ—Ä–º–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è (email/telegram_id + —Ä–æ–ª—å)
  - –°–ø–∏—Å–æ–∫ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π
  - –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–∏–Ω—è—Ç–∏—è –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è

**–§–∞–π–ª—ã:**
- `back/supabase/migrations/YYYYMMDD_invitations.sql` (–Ω–æ–≤—ã–π)
- `back/n8n/workflows/invite-user.json` (–Ω–æ–≤—ã–π)
- `back/n8n/workflows/accept-invite.json` (–Ω–æ–≤—ã–π)
- `front/InvitePage.tsx` (–Ω–æ–≤—ã–π)

**–û—Ü–µ–Ω–∫–∞:** 5-7 –¥–Ω–µ–π

---

### 3.2. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–µ–π

**–¶–µ–ª—å:** –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–µ–π –¥–ª—è owner

**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å workflow `/webhook/company.update`:
  - –ò–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è –∫–æ–º–ø–∞–Ω–∏–∏
  - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
- [ ] –°–æ–∑–¥–∞—Ç—å workflow `/webhook/company.members`:
  - –°–ø–∏—Å–æ–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∫–æ–º–ø–∞–Ω–∏–∏
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–ª—è–º–∏ (owner –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å)
  - –£–¥–∞–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ (owner)
- [ ] –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É `CompanySettingsPage.tsx`:
  - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–º–ø–∞–Ω–∏–∏
  - –°–ø–∏—Å–æ–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–ª—è–º–∏
  - –£–¥–∞–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤

**–§–∞–π–ª—ã:**
- `back/n8n/workflows/company.update.json` (–Ω–æ–≤—ã–π)
- `back/n8n/workflows/company.members.json` (–Ω–æ–≤—ã–π)
- `front/CompanySettingsPage.tsx` (–Ω–æ–≤—ã–π)

**–û—Ü–µ–Ω–∫–∞:** 4-5 –¥–Ω–µ–π

---

### 3.3. –£–¥–∞–ª–µ–Ω–∏–µ —á–∞—Ç–æ–≤

**–¶–µ–ª—å:** –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–¥–∞–ª—è—Ç—å —á–∞—Ç—ã (owner/manager)

**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å workflow `/webhook/chat.delete`:
  - Auth.validate
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ (owner/manager)
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–ª–∞–¥–µ–Ω–∏—è —á–∞—Ç–æ–º (company_id)
  - –ú—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ (soft delete) –∏–ª–∏ –ø–æ–ª–Ω–æ–µ
  - –ö–∞—Å–∫–∞–¥–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `ChatListPage.tsx`:
  - –ö–Ω–æ–ø–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —á–∞—Ç–∞
  - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è
  - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è

**–§–∞–π–ª—ã:**
- `back/n8n/workflows/chat.delete.json` (–Ω–æ–≤—ã–π)
- `front/ChatListPage.tsx` (–æ–±–Ω–æ–≤–∏—Ç—å)

**–û—Ü–µ–Ω–∫–∞:** 2-3 –¥–Ω—è

---

## üìä –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 4: –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (1-2 –Ω–µ–¥–µ–ª–∏)

### 4.1. Dashboard —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏

**–¶–µ–ª—å:** –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å workflow `/webhook/analytics.dashboard`:
  - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞—Ç–æ–≤
  - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π
  - –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–æ–º–ø–∞–Ω–∏—è–º
- [ ] –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É `DashboardPage.tsx`:
  - –ö–∞—Ä—Ç–æ—á–∫–∏ —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏
  - –ì—Ä–∞—Ñ–∏–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
  - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –ø–µ—Ä–∏–æ–¥—É

**–û—Ü–µ–Ω–∫–∞:** 3-4 –¥–Ω—è

---

### 4.2. –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π audit log

**–¶–µ–ª—å:** –ü–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–ó–∞–¥–∞—á–∏:**
- [ ] –†–∞—Å—à–∏—Ä–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ workflows:
  - –í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  - –ò–∑–º–µ–Ω–µ–Ω–∏—è —Ä–æ–ª–µ–π
  - –ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
  - –£–¥–∞–ª–µ–Ω–∏—è
- [ ] –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É `AuditLogPage.tsx`:
  - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–µ–π—Å—Ç–≤–∏—é/–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é/–∫–æ–º–ø–∞–Ω–∏–∏
  - –ü–æ–∏—Å–∫ –ø–æ traceId
  - –≠–∫—Å–ø–æ—Ä—Ç –ª–æ–≥–æ–≤

**–û—Ü–µ–Ω–∫–∞:** 2-3 –¥–Ω—è

---

## ‚ö° –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 5: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (1 –Ω–µ–¥–µ–ª—è)

### 5.1. –ü–∞–≥–∏–Ω–∞—Ü–∏—è

**–¶–µ–ª—å:** –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö

**–ó–∞–¥–∞—á–∏:**
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø–∞–≥–∏–Ω–∞—Ü–∏—é –≤ `chat.list`:
  - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã `limit` –∏ `offset`
  - –í–æ–∑–≤—Ä–∞—Ç `total` –∏ `hasMore`
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø–∞–≥–∏–Ω–∞—Ü–∏—é –≤ `chat.get-history`:
  - –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ —á–∞—Å—Ç—è–º
  - Infinite scroll
- [ ] –û–±–Ω–æ–≤–∏—Ç—å UI:
  - –ö–Ω–æ–ø–∫–∞ "–ó–∞–≥—Ä—É–∑–∏—Ç—å –µ—â—ë"
  - Infinite scroll –¥–ª—è —Å–ø–∏—Å–∫–æ–≤

**–û—Ü–µ–Ω–∫–∞:** 2-3 –¥–Ω—è

---

### 5.2. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

**–¶–µ–ª—å:** –£–º–µ–Ω—å—à–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ API

**–ó–∞–¥–∞—á–∏:**
- [ ] –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —á–∞—Ç–æ–≤ (localStorage)
- [ ] –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ user context
- [ ] –ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫—ç—à–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
- [ ] React Query –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫—ç—à–µ–º (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–û—Ü–µ–Ω–∫–∞:** 2-3 –¥–Ω—è

---

## üìÖ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

1. **–ù–µ–¥–µ–ª—è 1-2:** –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 (UI/UX —É–ª—É—á—à–µ–Ω–∏—è)
   - RBAC UI –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
   - –°–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤

2. **–ù–µ–¥–µ–ª—è 3:** –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2 (–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
   - –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å
   - Rate Limiting

3. **–ù–µ–¥–µ–ª—è 4-6:** –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3 (–ù–æ–≤—ã–µ —Ñ–∏—á–∏)
   - –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π
   - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–µ–π
   - –£–¥–∞–ª–µ–Ω–∏–µ —á–∞—Ç–æ–≤

4. **–ù–µ–¥–µ–ª—è 7-8:** –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 4 (–ê–Ω–∞–ª–∏—Ç–∏–∫–∞)
   - Dashboard
   - Audit log

5. **–ù–µ–¥–µ–ª—è 9:** –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 5 (–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è)
   - –ü–∞–≥–∏–Ω–∞—Ü–∏—è
   - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## üéØ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (MVP)

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –±—ã—Å—Ç—Ä–æ —É–ª—É—á—à–∏—Ç—å –ø—Ä–æ–¥—É–∫—Ç, –Ω–∞—á–Ω–∏ —Å:

1. **RBAC UI –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è** (1-2 –¥–Ω—è)
   - –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –¥–µ–π—Å—Ç–≤–∏–π –¥–ª—è viewer
   - Badge "–¢–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä"

2. **–°–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤** (3-4 –¥–Ω—è)
   - –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ —Å–ø–∏—Å–∫–æ–º
   - –ù–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–∂–¥—É —á–∞—Ç–∞–º–∏

3. **–ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å** (1-2 –¥–Ω—è)
   - –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤

**–ò—Ç–æ–≥–æ:** 5-8 –¥–Ω–µ–π –¥–ª—è MVP —É–ª—É—á—à–µ–Ω–∏–π

---

**–ì–æ—Ç–æ–≤ –Ω–∞—á–∞—Ç—å —Å –ª—é–±–æ–≥–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞!** üöÄ

